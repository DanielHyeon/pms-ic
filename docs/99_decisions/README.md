# 아키텍처 결정 기록 (ADR)

> **버전**: 2.0 | **최종 수정일**: 2026-02-02

---

## 목적

이 디렉토리는 프로젝트에서 내린 중요한 기술적 결정을 문서화한 아키텍처 결정 기록(ADR)을 포함합니다.

ADR은 다음 질문에 답합니다: **"왜 이렇게 만들었는가?"**

---

## ADR이 중요한 이유

| ADR 없이 | ADR 있으면 |
|----------|------------|
| "왜 이렇게 되어 있지?" | 명확하게 문서화된 근거 |
| 반복되는 논쟁 | 과거 결정 참조 |
| 사람과 함께 사라지는 컨텍스트 | 문서에 보존된 컨텍스트 |
| 일관성 없는 결정 | 패턴 기반 결정 |

---

## ADR 형식

각 ADR은 다음 구조를 따릅니다:

```markdown
# ADR-XXX: [결정 제목]

## 상태
승인됨 | 폐기됨 | ADR-YYY로 대체됨

## 배경
이 결정을 하게 된 이슈는 무엇인가?

## 검토한 옵션
1. 옵션 A
2. 옵션 B
3. 옵션 C

## 결정
제안하거나 실행하는 변경 사항은 무엇인가?

## 근거
왜 이 결정이 최선의 선택인가?

## 결과
- 긍정적 영향
- 부정적 영향
- 위험

## 재검토 조건
이 결정을 언제 재검토해야 하는가?
```

---

## 결정 목록

| ADR | 제목 | 상태 | 날짜 |
|-----|------|------|------|
| [ADR-001](./ADR-001-service-separation.md) | 백엔드와 LLM 서비스 분리 | 승인됨 | 2026-01-31 |
| [ADR-002](./ADR-002-outbox-pattern.md) | Outbox 패턴을 통한 PostgreSQL-Neo4j 동기화 | 승인됨 | 2026-01-31 |
| [ADR-003](./ADR-003-two-track-llm.md) | Two-Track LLM 워크플로우 | 승인됨 | 2026-01-31 |
| [ADR-004](./ADR-004-project-scoped-rbac.md) | 프로젝트 범위 RBAC | 승인됨 | 2026-01-26 |
| [ADR-005](./ADR-005-query-validation-security.md) | 쿼리 검증 보안 계층 | 승인됨 | 2026-02-02 |

---

## ADR 작성 시점

다음 경우에 ADR을 작성합니다:

- 여러 실행 가능한 옵션 중 선택할 때
- 되돌리기 어려운 결정을 내릴 때
- 향후 작업을 위한 패턴을 수립할 때
- 일반적인 관행에서 벗어날 때
- 중요한 새 기술을 추가할 때

---

## ADR 생명주기

```
제안됨 -> 승인됨 -> [폐기됨 | 대체됨]
    |
    +-- 거부됨 (이유 문서화)
```

---

*ADR은 승인되면 "불변"입니다. 결정을 변경하려면 기존 ADR을 대체하는 새 ADR을 작성합니다.*
