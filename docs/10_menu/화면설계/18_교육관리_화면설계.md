# 18. 교육관리 화면설계

> 작성일: 2026-02-08
> 버전: v1.1
> 라우트: `/education`, `/education/:courseId`
> 필요 Capability: `view_education` (조회), `manage_education_course` (과정 생성/편집), `manage_education_session` (세션 생성/편집), `record_attendance` (출석 기록), `submit_assessment` (평가 입력), `export_education_report` (보고서 Export)
> 기본 Preset: 역할에 따라 자동 결정
> 노드 역할: **Detail** (상세 노드 -- 필터/조회/추적 전용)

---

## 1. 화면 개요

### 1.1 목적

교육관리는 **"프로젝트에 필요한 교육이 어떻게 진행되고 있고, 성과는 어떤가?"**에 대한 답을 제공한다.
보험심사 프로젝트에서는 업무대상(Biz) 교육과 IT대상(Dev) 교육 2개 트랙으로 구분하여,
각 트랙별 커리큘럼(Fundamental -> Analytic AI -> Agentic AI) 10일 과정의
일정 관리, 출결 추적, 성과 평가(Pre/Post 테스트)를 체계적으로 수행한다.

기존 엑셀 기반 출석부 + 별도 평가지를 **통합 교육 관리 플랫폼**으로 전환하여,
교육 과정(Course) -> 교육 세션(Session) -> 출석(Attendance) -> 평가(Assessment)의
**4계층 추적 체인**을 실시간으로 관리한다.

> **v1.1 추가 철학**: 교육관리가 "제품 수준"으로 동작하려면 세 가지 축이 완결되어야 한다.
> **(1) Capability 즉시 세분화** -- `view_education` 단일 권한으로는 PM/PMO/DEV 행위 경계가 흐려진다.
> v1.1부터 `manage_education_course`, `manage_education_session`, `record_attendance`,
> `submit_assessment`, `export_education_report`를 **실제 활성** 상태로 전환하여 CTA 노출과 API 접근을 동시에 통제한다.
> **(2) 개인 이수(ParticipantCompletion)** -- 과정 상태(COMPLETED) ≠ 개인 이수(COMPLETED).
> PMO 보고서의 "미이수율"이 현실과 맞으려면 개인 기준 이수 정의가 별도로 필요하다.
> v1.1에서 `enrollment_status` + `participant_completion` 뷰를 도입하여 과정 상태와 개인 이수를 분리한다.
> **(3) 서버 중심 상태 전이** -- Course/Session 상태는 사용자가 임의로 바꾸면 데이터가 망가진다.
> v1.1에서 자동 전이 트리거(첫 세션 시작 → IN_PROGRESS, 모든 세션 완료+평가 정책 충족 → COMPLETED)를 서버에서 강제하고,
> Post-Test 요구 여부는 과정 설정(`requiresPostTest`)으로 선택 가능하게 한다.

### 1.2 설계 원칙

| 원칙 | 설명 |
|------|------|
| **2 트랙 구조** | Biz(업무대상) / Dev(IT대상) 교육을 명시적으로 분리하되, 동일 UI 구조로 렌더링 |
| **커리큘럼 3단계** | Fundamental -> Analytic AI -> Agentic AI 단계별 진행을 시각화 |
| **프로젝트 단계 연계** | 각 프로젝트 Phase에 필요한 교육을 매핑하여 적시성 관리 |
| **출결 + 성과 통합** | 출석 관리와 Pre/Post 평가를 하나의 흐름으로 통합 |
| **캘린더 뷰 지원** | 교육 일정을 캘린더 형태로 시각화하여 스케줄 충돌 방지 |
| **FilterSpec = 온톨로지** | 필터 키가 AI/URL/백엔드 공통 스키마로 통합 |
| **Preset별 정보 밀도** | PM은 계획/스케줄링, PMO는 이수율 통제, DEV는 내 교육 일정 중심 |
| **Capability 즉시 세분화** | view_education / manage_education_course / manage_education_session / record_attendance / submit_assessment / export_education_report 6종 활성 (v1.1) |
| **개인 이수 분리** | 과정 상태(COMPLETED) ≠ 개인 이수 -- enrollment_status + participant_completion 뷰로 PMO 보고서 정확도 확보 (v1.1) |
| **서버 중심 상태 전이** | Course/Session 상태는 서버가 자동 전이 -- 첫 세션 시작 → IN_PROGRESS, 전체 완료+평가 충족 → COMPLETED (v1.1) |
| **3종 일정 충돌 검증** | 강사 충돌(instructor_id, date, time overlap) / 장소 충돌 / 참여자 충돌 분리 -- track/date 단순 금지는 옵션으로 전환 (v1.1) |
| **지각 기준 정책** | session.late_threshold_minutes 기반 서버 자동 판정 -- 체크인 시간이 시작 시간+N분 초과 시 late 자동 산정 (v1.1) |
| **평가 버전 추적** | Assessment에 assessment_form_id(문항 세트 버전) -- Pre/Post 비교 시 동일 폼 기반만 허용 (v1.1) |
| **KPI 해석 가능성** | KPI hover tooltip에 계산 기준 표기 -- avg_attendance: "(present+late)/total, 세션별 가중 평균" 등 (v1.1) |
| **stats 이중 스코프** | CourseListResponse.stats를 filtered(현재 필터 기준) + overall(프로젝트 전체 기준)로 분리 (v1.1) |
| **DEV 참여형 액션** | DEV preset에 읽기 전용이지만 캘린더 내보내기(ICS), 교육 자료 링크, 질문 스레드 가벼운 액션 제공 (v1.1) |

### 1.3 핵심 질문 -> 위젯 매핑

| 사용자 질문 | 화면 영역 | Preset |
|-----------|---------|--------|
| "교육 과정이 총 몇 개야?" | 상단 KPI | ALL |
| "이수율이 얼마야?" | 상단 KPI (completion_rate) | PM, PMO |
| "평균 출석률은?" | 상단 KPI (avg_attendance) | PM, PMO |
| "다음 교육 일정은?" | 캘린더 뷰 / 예정 세션 목록 | ALL |
| "내 교육 일정 알려줘" | 내 교육 탭 | DEV |
| "Pre/Post 점수 차이는?" | 평가 결과 패널 | PM, PMO, DEV |
| "Biz 트랙 진행 상황은?" | 트랙별 진행률 위젯 | PM, PMO |
| "교육 이수 보고서 보여줘" | 교육 완료 리포트 | PMO |
| "캡스톤 프로젝트 결과는?" | 과정 상세 -> Day 10 평가 | PM, PMO |
| "어떤 단계에 필요한 교육이야?" | Phase-교육 매핑 뷰 | PM |
| "교육 자료 어디서 볼 수 있어?" | 세션 상세 -> 자료 링크 | DEV |
| "미이수자가 누구야?" | 보고서 뷰 -> 세그먼트 필터: 미이수 | PMO |
| "출석 위험 인원은?" | 보고서 뷰 -> 세그먼트 필터: 출석 위험 | PMO |

---

## 2. MenuOntology 노드

### 2.1 FilterSpec 정의

FilterSpec은 **이 화면이 지원하는 필터 스키마**를 온톨로지 내부에 선언한다.
AI가 딥링크를 생성할 때, URL 파라미터 문자열이 아니라 **FilterSpec 키 기반 필터 객체**를 반환한다.

```typescript
/** 교육관리 필터 스키마 -- 온톨로지 내장 */
export interface EducationFilterSpec {
  /** 교육 트랙 */
  track?: "biz" | "dev";
  /** 교육과정 ID */
  courseId?: string;
  /** 교육과정 상태 */
  status?: "PLANNED" | "SCHEDULED" | "IN_PROGRESS" | "COMPLETED";
  /** 교육 일자 범위 */
  dateRange?: { from: string; to: string };
  /** 강사 ID */
  instructorId?: string;
  /** 참여자 ID */
  participantId?: string;
  /** 커리큘럼 단계 */
  curriculumStage?: "fundamental" | "analytic_ai" | "agentic_ai";
  /** 자유 검색어 */
  q?: string;
}
```

### 2.2 Education 노드 (확정본)

```typescript
const educationNode: MenuOntologyNodeV2 = {
  nodeId: "education",
  label: "교육 관리",
  route: "/education",
  icon: "SchoolRounded",
  domain: "tools",
  nodeRole: "detail",              // Detail 노드 -- 행동/필터 질문에 +10 가산

  requiredCaps: ["view_education"],

  // --- 인텐트: 14개 ---
  intents: [
    // Ask 계열 -- 조회/질문
    "ask_education_status",         // "교육 현황 알려줘"
    "ask_education_schedule",       // "다음 교육 일정은?"
    "ask_education_completion",     // "교육 이수율 알려줘"
    "ask_education_attendance",     // "출석률 어떻게 돼?"
    "ask_education_assessment",     // "평가 점수 알려줘"
    "ask_education_by_track",       // "Biz 트랙 진행 상황은?"
    "ask_education_by_phase",       // "이번 단계에 필요한 교육은?"
    "ask_my_education",             // "내 교육 일정 알려줘"
    "ask_education_report",         // "교육 이수 보고서 보여줘"
    // Do 계열 -- 실행/변경
    "do_schedule_education",        // "교육 일정 잡아줘"
    "do_record_attendance",         // "출석 기록해줘"
    "do_submit_assessment",         // "평가 결과 입력해줘"
    "do_create_course",             // "교육 과정 등록해줘"
    "do_export_education_report",   // "교육 보고서 Export 해줘"
  ],
  canonicalQuestions: [
    "교육 과정 현황 보여줘",
    "이수율이 얼마나 되는지 알려줘",
    "다음 교육 일정은 언제야?",
    "Biz 트랙 교육 진행 상황은?",
    "Dev 트랙 커리큘럼 알려줘",
    "내 교육 일정 보여줘",
    "출석률 현황 어떻게 돼?",
    "Pre/Post 테스트 점수 비교해줘",
    "캡스톤 프로젝트 결과 알려줘",
    "이번 단계에 필요한 교육이 뭐야?",
    "교육 완료 보고서 보여줘",
  ],
  entities: ["Course", "Session", "User", "Phase", "Project"],
  keywords: [
    "교육", "커리큘럼", "이수", "출석", "평가", "트랙",
    "Biz", "Dev", "Fundamental", "Analytic", "Agentic",
    "캡스톤", "세션", "강사", "수강",
    "education", "training", "curriculum", "attendance",
    "assessment", "course", "completion",
  ],
  metrics: [
    "total_courses",
    "completion_rate",
    "avg_attendance",
    "avg_assessment_score",
    "upcoming_sessions",
    "pre_post_score_delta",
    "track_progress_biz",
    "track_progress_dev",
  ],

  // --- FilterSpec 온톨로지 내장 ---
  filterSpec: {
    keys: ["track", "courseId", "status", "dateRange", "instructorId", "participantId", "curriculumStage", "q"],
    defaults: {},
  },

  defaultPreset: "PM_WORK",
  presetPolicies: [
    {
      preset: "PMO_CONTROL",
      ui: {
        density: "standard",
        defaultRightPanel: "open",
        highlight: {
          metricKeys: ["completion_rate", "avg_attendance", "total_courses"],
          widgetKeys: ["KPI_COMPLETION", "KPI_ATTENDANCE", "TRACK_PROGRESS"],
        },
      },
      suggestedActions: [
        {
          key: "export_report",
          label: "교육 이수 보고서 Export",
          requiredCaps: ["export_education_report"],  // v1.1: decomposed cap
          targetNodeId: "reports",
        },
      ],
    },
    {
      preset: "PM_WORK",
      ui: {
        density: "detailed",
        defaultRightPanel: "open",
        highlight: {
          metricKeys: ["total_courses", "completion_rate", "upcoming_sessions", "avg_assessment_score"],
          widgetKeys: ["KPI_COURSES", "KPI_COMPLETION", "CALENDAR_VIEW", "ASSESSMENT_SUMMARY"],
        },
      },
      suggestedActions: [
        {
          key: "create_course",
          label: "교육과정 등록",
          requiredCaps: ["manage_education_course"],  // v1.1: decomposed cap
          targetNodeId: "education",
        },
        {
          key: "schedule_session",
          label: "세션 일정 등록",
          requiredCaps: ["manage_education_session"],  // v1.1: decomposed cap
          targetNodeId: "education",
        },
        {
          key: "record_attendance",
          label: "출석 기록",
          requiredCaps: ["record_attendance"],         // v1.1: decomposed cap
          targetNodeId: "education",
        },
        {
          key: "submit_assessment",
          label: "평가 입력",
          requiredCaps: ["submit_assessment"],         // v1.1: decomposed cap
          targetNodeId: "education",
        },
      ],
    },
    {
      preset: "DEV_EXECUTION",
      ui: {
        density: "standard",
        defaultRightPanel: "closed",
        defaultFilters: { participantId: "me" },
        highlight: {
          metricKeys: ["upcoming_sessions", "avg_assessment_score"],
          widgetKeys: ["MY_EDUCATION_SCHEDULE", "MY_ASSESSMENT_RESULTS"],
        },
      },
      // v1.1: DEV lightweight actions (read-safe, no write cap required)
      suggestedActions: [
        {
          key: "export_to_calendar",
          label: "내 일정 캘린더 내보내기 (ICS)",
          requiredCaps: ["view_education"],
          targetNodeId: "education",
        },
        {
          key: "view_materials",
          label: "교육 자료 보기",
          requiredCaps: ["view_education"],
          targetNodeId: "education",
        },
        {
          key: "post_question",
          label: "강사에게 질문 남기기",
          requiredCaps: ["view_education"],
          targetNodeId: "education",
        },
      ],
    },
  ],

  // --- DeepLink: routeTemplate 표준 (:param 형태) ---
  deepLinks: [
    {
      pattern: "/education?track=:track",
      description: "트랙별 교육 필터",
      requiredParams: ["track"],
    },
    {
      pattern: "/education?status=:status",
      description: "상태별 교육 필터",
      requiredParams: ["status"],
    },
    {
      pattern: "/education?curriculumStage=:curriculumStage",
      description: "커리큘럼 단계별 필터",
      requiredParams: ["curriculumStage"],
    },
    {
      pattern: "/education/:courseId",
      description: "교육과정 상세",
      requiredParams: ["courseId"],
    },
    {
      pattern: "/education?participantId=me",
      description: "내 교육 일정",
      requiredParams: [],
    },
    {
      pattern: "/education?view=calendar",
      description: "캘린더 뷰",
      requiredParams: [],
    },
  ],

  // --- 가상 노드: 딥링크를 온톨로지 2계층으로 승격 ---
  virtualNodes: [
    {
      virtualId: "education.biz",
      label: "Biz 트랙 교육",
      routeTemplate: "/education?track=biz",
      requiredParams: [],
      intents: ["ask_education_by_track", "ask_education_status"],
      description: "업무대상(Biz) 교육 트랙 직접 진입",
    },
    {
      virtualId: "education.dev",
      label: "Dev 트랙 교육",
      routeTemplate: "/education?track=dev",
      requiredParams: [],
      intents: ["ask_education_by_track", "ask_education_status"],
      description: "IT대상(Dev) 교육 트랙 직접 진입",
    },
    {
      virtualId: "education.my",
      label: "내 교육 일정",
      routeTemplate: "/education?participantId=me",
      requiredParams: [],
      intents: ["ask_my_education"],
      description: "내 교육 일정/결과 직접 진입",
    },
    {
      virtualId: "education.calendar",
      label: "교육 캘린더",
      routeTemplate: "/education?view=calendar",
      requiredParams: [],
      intents: ["ask_education_schedule"],
      description: "교육 일정 캘린더 뷰 직접 진입",
    },
    {
      virtualId: "education.report",
      label: "교육 이수 보고서",
      routeTemplate: "/education?view=report",
      requiredParams: [],
      intents: ["ask_education_report", "do_export_education_report"],
      description: "교육 이수 보고서 뷰 직접 진입",
    },
  ],

  // --- 스코프 2계층 분리 ---
  scope: {
    keys: ["project"],
    params: ["projectId"],
  },

  priority: 12,
};
```

---

## 3. 화면 구조

### 3.1 Right Panel panelMode 정의

Right Panel은 항상 동일한 영역이지만, **panelMode**에 따라 표시 내용이 달라진다.
조건 분기 대신 명시적 모드 enum으로 관리한다.

```typescript
/** Right Panel 모드 -- 명시적 enum */
export type EducationPanelMode =
  | "none"            // Right Panel 숨김
  | "course_preview"  // 교육과정 Quick Preview (목록에서 행 선택)
  | "session_detail"  // 세션 상세 (캘린더에서 일정 선택)
  | "attendance"      // 출석 현황 패널
  | "assessment"      // 평가 결과 패널
  | "report";         // 교육 이수 보고서 요약
```

**panelMode 결정 규칙**:

| 컨텍스트 | Preset | 기본 panelMode |
|---------|--------|---------------|
| 목록 + 행 미선택 | ALL | `"none"` |
| 목록 + 행 선택 | PM_WORK / PMO_CONTROL | `"course_preview"` |
| 목록 + 행 선택 | DEV_EXECUTION | `"assessment"` |
| 캘린더 + 일정 클릭 | ALL | `"session_detail"` |
| 상세 페이지 | PM_WORK / PMO_CONTROL | `"attendance"` |
| 상세 페이지 | DEV_EXECUTION | `"assessment"` |
| 보고서 뷰 | PMO_CONTROL | `"report"` |

### 3.2 뷰 모드 전환

교육관리 화면은 **3가지 뷰 모드**를 제공한다.

```typescript
/** 교육관리 뷰 모드 */
export type EducationViewMode =
  | "list"       // 교육과정 목록 (기본)
  | "calendar"   // 캘린더 뷰 (일정 중심)
  | "report";    // 이수 보고서 뷰
```

### 3.3 교육과정 목록 (`/education`)

```
+--------------------------------------------------------------+
|  Page Header                                                  |
|  교육 관리  [ AI 보험금지급심사 구축 ]                          |
|  [ 목록 | 캘린더 | 보고서 ]  [ 필터 v ]     [ + 교육과정 등록 ] |
+--------------------------------------------------------------+
|                                                              |
|  +----------+  +----------+  +----------+  +----------+      |
|  | 전체 과정|  | 이수율   |  | 평균     |  | 예정     |      |
|  |   4과정  |  |   65%    |  | 출석률   |  | 세션     |      |
|  | Biz:2    |  |          |  |  92%     |  |   3건    |      |
|  | Dev:2    |  |  ######  |  |          |  | 이번주:1 |      |
|  +----------+  +----------+  +----------+  +----------+      |
|                                                              |
|  +----------+  +----------+                                  |
|  | 평균 평가|  | Pre/Post |                                  |
|  | 점수     |  | 향상률   |                                  |
|  |  78점    |  |  +23%    |                                  |
|  +----------+  +----------+                                  |
|                                                              |
|  +-- 필터 바 -----------------------------------------------+|
|  | 트랙: [전체v] 상태: [전체v] 단계: [전체v] 기간: [전체v]  ||
|  |                        <-- FilterSpec 키와 1:1 매핑       ||
|  +----------------------------------------------------------+|
|                                                              |
|  +-- 트랙별 진행 현황 --------------------------------------+|
|  |                                                          ||
|  |  Biz 트랙 (업무대상)                                     ||
|  |  Fundamental ===== Analytic AI ====> Agentic AI ====     ||
|  |  [Day1-2 완료]     [Day3-4 진행중]   [Day7-10 대기]      ||
|  |  진행률: 40%                                             ||
|  |                                                          ||
|  |  Dev 트랙 (IT대상)                                       ||
|  |  Fundamental ===== Analytic AI ====> Agentic AI ====     ||
|  |  [Day1-3 완료]     [Day4-6 진행중]   [Day7-10 대기]      ||
|  |  진행률: 50%                                             ||
|  |                                                          ||
|  +----------------------------------------------------------+|
|                                                              |
|  +-- 교육과정 테이블 ---------------+-- Right Panel ---------+|
|  |                                 | panelMode:             ||
|  | ID     | 과정명   |트랙|상태    | "course_preview"       ||
|  | -----  | ------   |---|-----   |                        ||
|  | CRS-01 | Biz      |Biz|진행중  | CRS-02 상세            ||
|  |        | Fundmntl |   |        |                        ||
|  | CRS-02 | Biz      |Biz|예정    | 과정: Biz Analytic AI  ||
|  |    (*) | AnalyticAI|  |        | 트랙: Biz (업무대상)    ||
|  | CRS-03 | Dev      |Dev|진행중  | 상태: SCHEDULED        ||
|  |        | Fundmntl |   |        | 기간: 2/17 - 2/20      ||
|  | CRS-04 | Dev      |Dev|예정    | 강사: 이장래 센터장     ||
|  |        | AnalyticAI|  |        |                        ||
|  |                                 | 커리큘럼:              ||
|  |                                 |  Day3: 데이터분석(1)   ||
|  |                                 |  Day4: 데이터분석(2)   ||
|  |                                 |                        ||
|  |                                 | 수강 인원: 15명        ||
|  |                                 | 출석률: -              ||
|  |                                 | 평가 평균: -           ||
|  |                                 |                        ||
|  | < 1 2 3 > (20건/페이지)         | [상세 보기 ->]         ||
|  +---------------------------------+------------------------+|
|                                                              |
+--------------------------------------------------------------+
```

### 3.4 캘린더 뷰 (`/education?view=calendar`)

```
+--------------------------------------------------------------+
|  Page Header                                                  |
|  교육 관리  [ AI 보험금지급심사 구축 ]                          |
|  [ 목록 | *캘린더* | 보고서 ]  [ 필터 v ]                       |
+--------------------------------------------------------------+
|                                                              |
|  +-- 교육 캘린더 (월간) -----------+-- Right Panel ----------+|
|  |                                 |                         ||
|  |  << 2026년 2월 >>               | panelMode:              ||
|  |                                 | "session_detail"        ||
|  |  월  화  수  목  금  토  일     |                         ||
|  | --- --- --- --- --- --- ---     | Session 상세            ||
|  |                     1   2      |                         ||
|  |  3   4   5   6   7   8   9     | 2/10 (월)               ||
|  |      [Biz]                     | Biz Fundamental Day 1   ||
|  | 10  11  12  13  14  15  16     | AI 도구 활용 입문        ||
|  | [Biz][Biz]                     |                         ||
|  |      [Dev][Dev]                | 강사: 이장래 센터장      ||
|  | 17  18  19  20  21  22  23     | 장소: 교육장 A          ||
|  | [Biz][Biz]                     | 시간: 09:00-18:00       ||
|  |           [Dev][Dev]           |                         ||
|  | 24  25  26  27  28             | 수강 인원: 15명          ||
|  |                                 | 출석: 14/15 (93%)       ||
|  |                                 |                         ||
|  |  [Biz] = 업무대상 교육 (파랑)   | Pre-Test 평균: 42점     ||
|  |  [Dev] = IT대상 교육 (녹색)     |                         ||
|  |                                 | [출석 관리]             ||
|  |                                 | [평가 결과 보기]        ||
|  +---------------------------------+-------------------------+|
|                                                              |
+--------------------------------------------------------------+
```

### 3.5 이수 보고서 뷰 (`/education?view=report`)

```
+--------------------------------------------------------------+
|  Page Header                                                  |
|  교육 관리  [ AI 보험금지급심사 구축 ]                          |
|  [ 목록 | 캘린더 | *보고서* ]  [ Export v ]                     |
+--------------------------------------------------------------+
|                                                              |
|  +-- 교육 이수 현황 보고서 -----+-- Right Panel -------------+|
|  |                              |                            ||
|  |  -- 트랙별 이수 요약 --      | panelMode: "report"        ||
|  |                              |                            ||
|  |  Biz 트랙                    | 개인별 이수 현황           ||
|  |  전체: 15명                  |                            ||
|  |  완료: 8명 (53%)             | 선택: 김민수               ||
|  |  진행중: 7명 (47%)           |                            ||
|  |  평균 출석: 94%              | Biz 트랙:                  ||
|  |  평균 점수: 76점             |  Fundamental: 완료 (2/2)   ||
|  |                              |  Analytic AI: 진행중 (1/2) ||
|  |  Dev 트랙                    |  Agentic AI: 미시작 (0/4)  ||
|  |  전체: 10명                  |                            ||
|  |  완료: 6명 (60%)             | 출석률: 100%               ||
|  |  진행중: 4명 (40%)           | Pre-Test: 38점             ||
|  |  평균 출석: 88%              | Post-Test: 72점            ||
|  |  평균 점수: 82점             | 향상: +34점 (+89%)         ||
|  |                              |                            ||
|  |  -- 개인별 이수 현황 --      | 세션별 출석:               ||
|  |                              |  Day1: O                   ||
|  |  이름   |트랙|출석|Pre|Post  |  Day2: O                   ||
|  |  ----   |---|---|---|----   |  Day3: O                   ||
|  |  김민수 |Biz|100%|38| 72   |  Day4: (진행중)            ||
|  |  박지은 |Biz| 93%|45| 81   |                            ||
|  |  이승호 |Dev|100%|55| 88   |                            ||
|  |  최하영 |Dev| 87%|42| 75   |                            ||
|  |  ...                        |                            ||
|  |                              |                            ||
|  +------------------------------+----------------------------+|
|                                                              |
+--------------------------------------------------------------+
```

---

## 4. Preset별 차이

### 4.1 PM_WORK (PM) -- 교육 계획 + 스케줄링

| 영역 | 표시 내용 |
|------|---------|
| KPI Row | 전체 과정 수, 이수율, 평균 출석률, 예정 세션, 평균 평가 점수, Pre/Post 향상률 |
| 트랙 진행 | Biz/Dev 양쪽 트랙 진행률 타임라인 |
| 테이블 | 전체 컬럼 (과정명, 트랙, 상태, 기간, 강사, 수강인원, 출석률, 평가평균) |
| Right Panel | panelMode: `"course_preview"` (행 선택 시 과정 상세) |
| CTA | `교육과정 등록`, `세션 일정 등록` |
| 뷰 모드 | 목록 / 캘린더 / 보고서 모두 접근 가능 |

### 4.2 PMO_CONTROL (PMO) -- 교육 이행 통제

| 영역 | 표시 내용 |
|------|---------|
| KPI Row | 이수율, 평균 출석률, 미이수 인원, 평균 평가 점수 |
| 트랙 진행 | 트랙별 이수율 요약 (막대 차트) |
| 테이블 | 이수율 중심 컬럼 (이수/미이수/출석/평가 강조) |
| Right Panel | panelMode: `"report"` (이수 현황 요약) |
| CTA | `교육 이수 보고서 Export` -> targetNodeId: `reports` |
| 뷰 모드 | 목록 / 보고서 위주 (캘린더 접근 가능) |

### 4.3 DEV_EXECUTION (DEV / DevReader) -- 내 교육 일정 + 결과

| 영역 | 표시 내용 |
|------|---------|
| KPI Row | 내 예정 세션 수, 내 출석률, 내 평가 점수 |
| 트랙 진행 | 내가 속한 트랙의 진행률만 표시 |
| 테이블 | 내 교육 과정만 필터 (participantId=me 기본 적용) |
| Right Panel | panelMode: `"assessment"` (내 평가 결과) |
| CTA | `캘린더 내보내기 (ICS)`, `교육 자료 보기`, `강사에게 질문` (v1.1: 읽기+참여형 액션) |
| 뷰 모드 | 목록 / 캘린더 (보고서 접근 불가) |

### 4.4 Preset 비노출 (EXEC_SUMMARY / CUSTOMER_APPROVAL)

00_총괄 역할별 메뉴 노출 매트릭스에 따라 교육 관리는 Sponsor(EXEC_SUMMARY)와
Customer PM(CUSTOMER_APPROVAL)에게는 **메뉴 자체가 숨김 처리**된다.

---

## 5. 교육과정 상세 (커리큘럼 구조)

### 5.1 2트랙 커리큘럼 모델

```
교육 커리큘럼 Map
=================

           Fundamental          Analytic AI           Agentic AI
           (기초)               (분석/응용)            (자율/에이전트)

Biz      +------------------+ +------------------+ +------------------+
(업무    | Day 1: AI 도구   | | Day 3: 데이터    | | Day 7: Agentic   |
 대상)   |  활용 입문       | |  분석 및 시각화(1)| |  Process 설계(1) |
         | Day 2: 데이터와  | | Day 4: 데이터    | | Day 8: Agentic   |
         |  AI에 대한 개념  | |  분석 및 시각화(2)| |  Process 설계(2) |
         +------------------+ | Day 5: 노코드    | | Day 9: 자율      |
                              |  머신러닝 활용(1) | |  에이전트 및 응용|
                              | Day 6: 노코드    | | Day 10: 캡스톤   |
                              |  머신러닝 활용(2) | |  프로젝트        |
                              +------------------+ +------------------+

Dev      +------------------+ +------------------+ +------------------+
(IT      | Day 1: AI 코딩   | | Day 4: 파이썬    | | Day 7: 지식 통합 |
 대상)   |  및 LLM 활용 기초| |  기반 데이터     | |  및 에이전트     |
         | Day 2: 파이썬    | |  분석 및 시각화  | |  디자인          |
         |  기본 문법(1)    | | Day 5: 머신러닝  | | Day 8: Advanced  |
         | Day 3: 파이썬    | |  모델 구축과     | |  멀티에이전트(1) |
         |  기본 문법(2)    | |  성능 평가(1)    | | Day 9: Advanced  |
         +------------------+ | Day 6: 머신러닝  | |  멀티에이전트(2) |
                              |  모델 구축과     | | Day 10: 캡스톤   |
                              |  성능 평가(2)    | |  프로젝트        |
                              +------------------+ +------------------+
```

### 5.2 Biz 트랙 커리큘럼 상세

| 교육일정 | 과정 | 세부교육과정 | 담당강사 | 학습 목표 |
|---------|------|-----------|---------|---------|
| Day 1 | Fundamental | AI 도구 활용 입문 | 이장래 센터장 | Assistant -> Agent -> Autonomous 개념, 생성형AI 요약/정리 기본, 프롬프트 기본설정, 반복업무 자동화 아이디어 발굴 |
| Day 2 | Fundamental | 데이터와 AI에 대한 개념 | 이장래 센터장 | 데이터의 역할과 가치 이해, 정형/비정형 데이터 차이, 머신러닝/딥러닝/생성형 AI 작동 원리 이해 |
| Day 3 | Analytic AI | 데이터 분석 및 시각화(1) | 이장래 센터장 | 데이터 분석 프로세스 전체 모듈 이해, 탐색적 데이터 분석(EDA), 기초 시각화 |
| Day 4 | Analytic AI | 데이터 분석 및 시각화(2) | 이장래 센터장 | 기술 통계/기술 설정 기본, 다양한 시각화 결과 해석 방법 이해, 차트 선택 기준 및 시각화 결과 해석 |
| Day 5 | Analytic AI | 노코드 머신러닝 모델 활용(1) | 이장래 센터장 | 머신러닝 기본 개념 이해, 회귀/분류 모델 개념, 노코드 머신러닝 도구 개념 이해 |
| Day 6 | Analytic AI | 노코드 머신러닝 모델 활용(2) | 이장래 센터장 | 예측 결과 해석 방법 이해, 모델 성능 평가 지표에 대한 이해 |
| Day 7 | Agentic AI | Agentic Process 설계 및 구현(1) | 이장래 센터장 | 디지털 동료(Agent) 만들기, 업무 프로세스 설계 사고, n8n 워크플로우 제작 |
| Day 8 | Agentic AI | Agentic Process 설계 및 구현(2) | 이장래 센터장 | Process-GPT 프로리얼 Lv1-Lv5 완수, 도구 연결(메일/시트/문서/웹), 테스트/디버깅 루틴 |
| Day 9 | Agentic AI | 자율 에이전트 및 응용 | 이장래 센터장 | 바이브 코딩 체험, 커서 설치 및 간단한 웹앱 생성, Proactive/자율화 설계 |
| Day 10 | Agentic AI | 캡스톤 프로젝트 | 이장래 센터장 | 전 과정 종합 실습, 실제 업무 개선 프로젝트 수행 및 발표 |

### 5.3 Dev 트랙 커리큘럼 상세

| 교육일정 | 과정 | 세부교육과정 | 담당강사 | 학습 목표 |
|---------|------|-----------|---------|---------|
| Day 1 | Fundamental | AI 코딩 및 LLM 활용 기초 | 장진영 센터장 | AI IDE(Copilot/Cursor) 코딩 루틴, 프롬프트/출력 제어, LLM App 기본, Tool 호출 기본(Function Calling/ReAct) |
| Day 2 | Fundamental | 파이썬 기본 문법 익히기(1) | 장진영 센터장 | Google Colab 환경 이해, 파이썬 기본 문법 이해, 기본 자료형/리스트/튜플 |
| Day 3 | Fundamental | 파이썬 기본 문법 익히기(2) | 장진영 센터장 | 조건문/반복문 사용법 익히기, 함수 정의의 방법 익히기 |
| Day 4 | Analytic AI | 파이썬 기반 데이터 분석 및 시각화 | 장진영 센터장 | 데이터 로딩 방법 익히기, 기본 전처리 방법 익히기, 탐색적 데이터 분석(EDA), 기본 시각화 |
| Day 5 | Analytic AI | 머신러닝 모델 구축과 성능 평가(1) | 장진영 센터장 | 머신러닝 기본 개념 이해, 회귀/분류 모델 구조 이해, 머신러닝 모델 만들기 |
| Day 6 | Analytic AI | 머신러닝 모델 구축과 성능 평가(2) | 장진영 센터장 | 다양한 알고리즘 원리 이해, 모델 성능 평가 지표 이해, 하이퍼파라미터 튜닝 |
| Day 7 | Agentic AI | 지식 통합 및 에이전트 디자인 | 장진영 센터장 | 에이전트 설계 및 지식/도구 통합, LangChain/LangGraph 기반 Agent, RAG(벡터DB) + Text2SQL, Tool Use 패턴 |
| Day 8 | Agentic AI | Advanced 멀티에이전트 시스템(1) | 장진영 센터장 | MCP 기반 Tool 표준화(FastMCP), A2A/Agent Mesh 개념/상호운용 연습, 이벤트 기반 오케스트레이션 |
| Day 9 | Agentic AI | Advanced 멀티에이전트 시스템(2) | 장진영 센터장 | 성능/비용 최적화(토큰/캐시/병렬/졸업), 운영/관측(로그/트레이싱/평가 루프), 컨텍스트(멀티에이전트 자동화 솔루션) |
| Day 10 | Agentic AI | 캡스톤 프로젝트 | 장진영 센터장 | 전 과정 종합 실습, 실제 프로젝트 기반 멀티에이전트 시스템 구축 및 발표 |

### 5.4 커리큘럼 단계(Stage) 정의

```typescript
/** 커리큘럼 단계 */
export type CurriculumStage = "fundamental" | "analytic_ai" | "agentic_ai";

/** 커리큘럼 단계 메타데이터 */
export const CURRICULUM_STAGES: Record<CurriculumStage, {
  label: string;
  description: string;
  color: string;
}> = {
  fundamental: {
    label: "Fundamental",
    description: "AI/데이터 기초 개념 및 도구 활용 입문",
    color: "#3B82F6",  // blue-500
  },
  analytic_ai: {
    label: "Analytic AI",
    description: "데이터 분석, 시각화, 머신러닝 모델 활용",
    color: "#F59E0B",  // amber-500
  },
  agentic_ai: {
    label: "Agentic AI",
    description: "에이전트 설계, 멀티에이전트, 자율화",
    color: "#10B981",  // emerald-500
  },
};

/** 트랙별 일별 커리큘럼 매핑 */
export interface DayCurriculum {
  day: number;
  stage: CurriculumStage;
  title: string;
  description: string;
  instructor: string;
  learningObjectives: string[];
}

export const BIZ_CURRICULUM: DayCurriculum[] = [
  {
    day: 1, stage: "fundamental",
    title: "AI 도구 활용 입문",
    description: "Assistant/Agent/Autonomous 개념부터 생성형 AI 요약/정리까지",
    instructor: "이장래 센터장",
    learningObjectives: [
      "Assistant -> Agent -> Autonomous 개념 이해",
      "생성형AI(요약/정리) 기본",
      "프롬프트 기본설정(목표/제약/예시)",
      "완성된 프롬플릿 실행 체험(non-template형)",
      "반복업무 자동화 아이디어 발굴",
    ],
  },
  {
    day: 2, stage: "fundamental",
    title: "데이터와 AI에 대한 개념",
    description: "데이터의 역할과 비정형 데이터의 차이 이해",
    instructor: "이장래 센터장",
    learningObjectives: [
      "데이터의 역할(데이터의 가치) 기본 이해",
      "정형 데이터와 비정형 데이터의 차이 이해",
      "실제 업무에서의 데이터 활용 사례 살펴보기",
      "인공지능의 기본 개념과 활용 영역 이해",
      "머신러닝과 딥러닝의 차이 이해",
      "생성형 AI의 작동 원리 이해",
      "생성형 AI의 성과와 한계 이해",
    ],
  },
  // Day 3-10 follow the same structure (omitted for brevity in type definition)
];

export const DEV_CURRICULUM: DayCurriculum[] = [
  {
    day: 1, stage: "fundamental",
    title: "AI 코딩 및 LLM 활용 기초",
    description: "AI IDE 코딩 루틴부터 Function Calling까지",
    instructor: "장진영 센터장",
    learningObjectives: [
      "AI IDE(Copilot/Cursor) 코딩 루틴",
      "프롬프트/출력 제어(구조화/검증)",
      "LLM App 기본(요약/분류)",
      "Tool 호출 기본(Function Calling/ReAct)",
      "Git/빌드/테스트 자동화 기본",
    ],
  },
  // Day 2-10 follow the same structure
];
```

### 5.5 교육과정 상세 화면 (`/education/:courseId`)

```
+--------------------------------------------------------------+
|  Page Header                                                  |
|  <- 교육 관리  CRS-01  Biz Fundamental                        |
|                                    [ 편집 ] [ 세션 추가 ]      |
+--------------------------------------------------------------+
|                                                              |
|  +-- 과정 기본 정보 ----------------+-- Right Panel ---------+|
|  |                                  | panelMode:             ||
|  |  교육과정 ID: CRS-01            | "attendance"           ||
|  |  과정명: Biz Fundamental        |                        ||
|  |  트랙: Biz (업무대상)           | Session 출석 현황       ||
|  |  커리큘럼 단계: Fundamental     |                        ||
|  |  상태: IN_PROGRESS              | Day 1 (2/10 월)        ||
|  |  기간: 2026-02-10 ~ 2026-02-11 |  출석: 14/15 (93%)     ||
|  |  강사: 이장래 센터장            |                        ||
|  |  장소: 교육장 A                 |  출석 O: 김민수, 박지은,||
|  |  수강 인원: 15명                |   이승호, ...          ||
|  |                                  |  결석 X: 최하영        ||
|  +----------------------------------+  지각 /: -             ||
|                                      |                        ||
|  +-- 커리큘럼 일정 ----------------+ |  -- Pre-Test 결과 --   ||
|  |                                  | |  응시: 14/15          ||
|  |  진행률: [=========>    ] 50%    | |  평균: 42점           ||
|  |                                  | |  최고: 68점           ||
|  |  Stage   | Day | 주제     |상태  | |  최저: 21점           ||
|  |  -----   | --- | ----     |---   | |                        ||
|  |  Fundmntl| D1  | AI도구   | 완료 | |  -- Post-Test 결과 -- ||
|  |          | D2  | 데이터AI | 완료 | |  (아직 미실시)         ||
|  |  AnalyticAI                      | |                        ||
|  |          | D3  | 분석(1)  |진행중| |  [출석 관리]           ||
|  |          | D4  | 분석(2)  | 대기 | |  [평가 입력]           ||
|  |          | D5  | 노코드(1)| 대기 | |                        ||
|  |          | D6  | 노코드(2)| 대기 | +------------------------+|
|  |  Agentic AI                      |                         |
|  |          | D7  | Process(1)| 대기 |                         |
|  |          | D8  | Process(2)| 대기 |                         |
|  |          | D9  | 에이전트 | 대기 |                         |
|  |          | D10 | 캡스톤   | 대기 |                         |
|  |                                  |                         |
|  +----------------------------------+                         |
|                                                              |
|  +-- 평가 현황 (Pre/Post) --------------------------------+  |
|  |                                                         |  |
|  |  Pre-Test                    Post-Test                  |  |
|  |  평균: 42점                  평균: - (미실시)            |  |
|  |  응시율: 93%                 응시율: -                   |  |
|  |                                                         |  |
|  |  점수 분포 (히스토그램)      점수 분포 (히스토그램)      |  |
|  |  0-20: ##                   (대기)                      |  |
|  |  21-40: ######                                          |  |
|  |  41-60: ########                                        |  |
|  |  61-80: ###                                             |  |
|  |  81-100: #                                              |  |
|  |                                                         |  |
|  +---------------------------------------------------------+  |
|                                                              |
+--------------------------------------------------------------+
```

---

## 6. 데이터 구조 / API

### 6.1 Course 엔티티

```typescript
/** 교육과정 상태 */
export type CourseStatus = "PLANNED" | "SCHEDULED" | "IN_PROGRESS" | "COMPLETED";

/** 교육 트랙 */
export type EducationTrack = "biz" | "dev";

/** 출석 상태 */
export type AttendanceStatus = "present" | "absent" | "late";

/** 교육과정 엔티티 */
export interface Course {
  id: string;                          // CRS-001
  projectId: string;

  // 기본 정보
  name: string;                        // "Biz Fundamental"
  description: string;
  track: EducationTrack;               // "biz" | "dev"
  curriculumStage: CurriculumStage;    // "fundamental" | "analytic_ai" | "agentic_ai"
  status: CourseStatus;

  // 일정
  startDate: string;                   // ISO date
  endDate: string;                     // ISO date
  totalDays: number;                   // e.g., 2 (Fundamental Biz = Day 1-2)

  // 강사/장소
  instructor: {
    id: string;
    name: string;
    title: string;                     // "센터장"
  };
  location?: string;                   // "교육장 A"

  // 참여자
  participantIds: string[];            // User ID 목록
  maxParticipants: number;

  // v1.1: completion policy
  requiresPostTest: boolean;           // Post-Test 필수 여부 (default: true for agentic_ai, false for others)
  completionPolicy?: {
    postTestRequired: boolean;
    capstoneRequired: boolean;         // agentic_ai only
    minAttendanceRate: number;         // 0~100, default 80
  };

  // Phase 연계
  linkedPhaseIds?: string[];           // 연관 프로젝트 단계 ID

  // 집계 (목록 API에서 서버 조인 제공)
  sessionCount: number;                // 총 세션 수
  completedSessionCount: number;       // 완료된 세션 수
  avgAttendanceRate: number;           // 평균 출석률 (0~100)
  avgAssessmentScore?: number;         // 평균 평가 점수 (0~100)

  // 메타
  createdAt: string;
  updatedAt: string;
  createdBy: string;
}
```

### 6.2 Session 엔티티

```typescript
/** 교육 세션 상태 */
export type SessionStatus = "SCHEDULED" | "IN_PROGRESS" | "COMPLETED" | "CANCELLED";

/** 교육 세션 엔티티 */
export interface Session {
  id: string;                          // SES-001
  courseId: string;                     // FK -> Course
  projectId: string;

  // 일정
  dayNumber: number;                   // 커리큘럼 Day (1~10)
  date: string;                        // ISO date (실제 교육일)
  startTime: string;                   // "09:00"
  endTime: string;                     // "18:00"
  status: SessionStatus;

  // 커리큘럼 연결
  curriculumStage: CurriculumStage;
  title: string;                       // 세부교육과정명
  description: string;
  learningObjectives: string[];

  // 강사
  instructorId: string;
  instructorName: string;

  // 장소
  location?: string;

  // v1.1: late policy
  lateThresholdMinutes: number;        // default 10 — check-in after startTime + N min → "late"

  // 출석 집계 (서버 조인)
  attendanceSummary: {
    total: number;
    present: number;
    absent: number;
    late: number;
    rate: number;                      // 0~100
  };

  // 메타
  createdAt: string;
  updatedAt: string;
}
```

### 6.3 Attendance 엔티티

```typescript
/** 출석 기록 엔티티 */
export interface Attendance {
  id: string;                          // ATT-001
  sessionId: string;                   // FK -> Session
  courseId: string;                     // FK -> Course (역정규화)
  projectId: string;

  // 참석자
  userId: string;
  userName: string;
  department?: string;                 // 부서명
  position?: string;                   // 직책

  // 출석 상태
  status: AttendanceStatus;            // "present" | "absent" | "late"
  checkInTime?: string;                // 출석 시간
  note?: string;                       // 비고 (사유 등)

  // 메타
  recordedBy: string;                  // 기록자
  recordedAt: string;
}
```

### 6.4 Assessment 엔티티

```typescript
/** 평가 유형 */
export type AssessmentType = "pre_test" | "post_test" | "capstone";

/** 평가 결과 엔티티 */
export interface Assessment {
  id: string;                          // ASM-001
  courseId: string;                     // FK -> Course
  projectId: string;

  // 참석자
  userId: string;
  userName: string;

  // 평가 정보
  type: AssessmentType;                // "pre_test" | "post_test" | "capstone"
  assessmentFormId?: string;           // v1.1: form version — Pre/Post delta is only valid within same form
  score: number;                       // 0~100
  maxScore: number;                    // 기본 100
  passed: boolean;                     // 합격 여부 (기준: 60점)
  feedback?: string;                   // 강사 피드백

  // 캡스톤 전용
  capstoneProject?: {
    title: string;
    description: string;
    presentationUrl?: string;
    evaluationCriteria: {
      criterion: string;
      score: number;
      maxScore: number;
    }[];
  };

  // 메타
  assessedAt: string;
  assessedBy: string;
}
```

### 6.5 Course Status 전이 규칙 (v1.1: 서버 중심)

```
[PLANNED] ---(PM 명시)--> [SCHEDULED] ---(서버 자동)--> [IN_PROGRESS] ---(서버 자동)--> [COMPLETED]
                  \                                                                        |
                   \-------(PM 명시: 일정 취소)-------<------(불가: 최종 상태)---------------/

PLANNED:       과정 등록만 완료 (일정 미확정)                       -- PM 명시 전이
SCHEDULED:     일정 확정 + 세션 생성 완료                          -- PM 명시 전이
IN_PROGRESS:   첫 번째 세션 IN_PROGRESS/COMPLETED 시 서버 자동 전이 -- 서버 트리거
COMPLETED:     서버 자동 전이 (아래 조건 모두 충족 시)              -- 서버 트리거
```

```typescript
/** v1.1: 서버 중심 상태 전이 규칙 */
export const COURSE_STATUS_TRANSITIONS: Record<CourseStatus, CourseStatus[]> = {
  PLANNED:     ["SCHEDULED"],
  SCHEDULED:   ["IN_PROGRESS", "PLANNED"],  // PLANNED 롤백은 PM 명시
  IN_PROGRESS: ["COMPLETED"],
  COMPLETED:   [],                          // 최종 상태
};

/** v1.1: 서버 자동 전이 트리거 */
export const COURSE_AUTO_TRANSITION_TRIGGERS = {
  /** SCHEDULED → IN_PROGRESS: 첫 세션이 IN_PROGRESS 또는 COMPLETED가 되는 순간 */
  toInProgress: {
    trigger: "WHEN any session.status changes to IN_PROGRESS or COMPLETED",
    guard: "course.status === 'SCHEDULED'",
    action: "UPDATE course SET status = 'IN_PROGRESS'",
  },
  /** IN_PROGRESS → COMPLETED: 모든 세션 + 평가 정책 충족 */
  toCompleted: {
    trigger: "WHEN last session.status changes to COMPLETED or CANCELLED",
    guard: `
      course.status === 'IN_PROGRESS'
      AND all sessions IN ('COMPLETED', 'CANCELLED')
      AND (course.completionPolicy.postTestRequired === false
           OR post_test_completion_rate >= 1.0)
      AND (course.completionPolicy.capstoneRequired === false
           OR capstone_completion_rate >= 1.0)
    `,
    action: "UPDATE course SET status = 'COMPLETED'",
  },
};

/** v1.1: Completion Policy — Post-Test/Capstone 요구 여부를 과정 설정으로 선택 */
export const DEFAULT_COMPLETION_POLICIES: Record<CurriculumStage, {
  postTestRequired: boolean;
  capstoneRequired: boolean;
  minAttendanceRate: number;
}> = {
  fundamental:  { postTestRequired: true,  capstoneRequired: false, minAttendanceRate: 80 },
  analytic_ai:  { postTestRequired: true,  capstoneRequired: false, minAttendanceRate: 80 },
  agentic_ai:   { postTestRequired: false, capstoneRequired: true,  minAttendanceRate: 80 },
  // agentic_ai: capstone이 사실상 post 역할 — capstone으로 대체
};
```

### 6.5a 개인 이수(ParticipantCompletion) 모델 (v1.1)

과정 상태(`COMPLETED`)와 **개인 이수**는 분리해야 PMO 보고서가 현실과 맞는다.

```typescript
/** v1.1: 수강 등록 상태 — participants 테이블 확장 */
export type EnrollmentStatus =
  | "ENROLLED"     // 수강 중
  | "WAITLIST"     // 대기
  | "DROPPED"      // 중도 탈퇴
  | "COMPLETED";   // 개인 기준 이수 완료

/** v1.1: 개인 이수 판정 기준 */
export interface ParticipantCompletion {
  userId: string;
  courseId: string;
  enrollmentStatus: EnrollmentStatus;
  isRequired: boolean;                 // 필수 교육 여부
  roleTarget?: string;                 // 대상군 (PMO/DEV/Biz 등)

  // 이수 판정 입력
  attendanceRate: number;              // 0~100 (present+late / attended sessions)
  preTestScore: number | null;
  postTestScore: number | null;
  capstoneScore: number | null;

  // 이수 판정 결과
  meetsAttendance: boolean;            // attendanceRate >= course.completionPolicy.minAttendanceRate
  meetsAssessment: boolean;            // postTest 또는 capstone 통과 (과정 정책에 따라)
  isCompleted: boolean;                // meetsAttendance AND meetsAssessment
  completedAt: string | null;
}
```

> **핵심 구분**: `course.status === "COMPLETED"`는 "과정 자체가 종료됨"을 의미하고,
> `participant.enrollmentStatus === "COMPLETED"`는 "이 사람이 개인 기준 이수를 충족했음"을 의미한다.
> PMO 보고서의 `completionRate`는 후자 기준이어야 한다.

### 6.5b 세션 일정 충돌 검증 (v1.1)

세션 생성/수정 시 서버가 3종 충돌을 검사한다. track/date 단순 금지는 **기본값이 아니라 옵션**이다.

```typescript
/** v1.1: 세션 충돌 검증 규칙 */
export const SESSION_CONFLICT_VALIDATORS = {
  /** 강사 충돌: 같은 강사가 같은 시간대에 다른 세션 */
  instructor: {
    rule: "REJECT IF EXISTS session WHERE instructor_id = :instructorId AND date = :date AND time_overlap(:startTime, :endTime)",
    severity: "ERROR",
    message: "강사 '{instructorName}'이(가) 동일 시간대에 다른 세션이 배정되어 있습니다.",
  },
  /** 장소 충돌: 같은 장소에 같은 시간대 다른 세션 */
  location: {
    rule: "REJECT IF EXISTS session WHERE location = :location AND date = :date AND time_overlap(:startTime, :endTime)",
    severity: "ERROR",
    message: "'{location}' 장소에 동일 시간대 다른 세션이 배정되어 있습니다.",
  },
  /** 참여자 충돌: 같은 사용자가 같은 시간대 다른 세션 수강 */
  participant: {
    rule: "WARN IF EXISTS enrollment WHERE user_id IN :participantIds AND session.date = :date AND time_overlap",
    severity: "WARNING",
    message: "{count}명의 참여자가 동일 시간대 다른 세션에 등록되어 있습니다.",
  },
  /** (선택) track/date 단순 중복 금지 — 기본 비활성, 과정 설정에서 활성 가능 */
  trackDateUnique: {
    rule: "REJECT IF EXISTS session WHERE track = :track AND date = :date",
    severity: "WARNING",
    enabled: false,  // default off
    message: "같은 트랙에 같은 날 다른 세션이 이미 있습니다.",
  },
};
```

### 6.6 데이터베이스 스키마

```sql
-- 교육과정 테이블
CREATE TABLE education_courses (
  id              VARCHAR(20) PRIMARY KEY,
  project_id      VARCHAR(36) NOT NULL,
  name            VARCHAR(200) NOT NULL,
  description     TEXT,
  track           VARCHAR(10) NOT NULL CHECK (track IN ('biz', 'dev')),
  curriculum_stage VARCHAR(20) NOT NULL CHECK (curriculum_stage IN ('fundamental', 'analytic_ai', 'agentic_ai')),
  status          VARCHAR(20) NOT NULL DEFAULT 'PLANNED'
                  CHECK (status IN ('PLANNED', 'SCHEDULED', 'IN_PROGRESS', 'COMPLETED')),
  start_date      DATE,
  end_date        DATE,
  total_days      SMALLINT NOT NULL DEFAULT 0,
  instructor_id   VARCHAR(36),
  instructor_name VARCHAR(100),
  location        VARCHAR(200),
  max_participants SMALLINT NOT NULL DEFAULT 30,
  linked_phase_ids TEXT[],              -- Phase ID 배열
  -- v1.1: completion policy
  requires_post_test  BOOLEAN NOT NULL DEFAULT true,
  requires_capstone   BOOLEAN NOT NULL DEFAULT false,
  min_attendance_rate SMALLINT NOT NULL DEFAULT 80,    -- 0~100
  created_at      TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at      TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  created_by      VARCHAR(36) NOT NULL
);

-- 교육과정 참여자 관계 테이블 (v1.1: enrollment status + required flag)
CREATE TABLE education_course_participants (
  id              BIGSERIAL PRIMARY KEY,
  course_id       VARCHAR(20) NOT NULL REFERENCES education_courses(id),
  user_id         VARCHAR(36) NOT NULL,
  enrolled_at     TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  unenrolled_at   TIMESTAMPTZ,         -- NULL이면 활성
  project_id      VARCHAR(36) NOT NULL,
  -- v1.1: enrollment management
  is_required     BOOLEAN NOT NULL DEFAULT false,           -- 필수 교육 여부
  role_target     VARCHAR(50),                              -- 대상군 (PMO/DEV/Biz 등)
  enrollment_status VARCHAR(20) NOT NULL DEFAULT 'ENROLLED'
                  CHECK (enrollment_status IN ('ENROLLED', 'WAITLIST', 'DROPPED', 'COMPLETED')),
  completed_at    TIMESTAMPTZ,                              -- 개인 이수 완료 시점
  UNIQUE (course_id, user_id) WHERE unenrolled_at IS NULL
);

-- 교육 세션 테이블
CREATE TABLE education_sessions (
  id              VARCHAR(20) PRIMARY KEY,
  course_id       VARCHAR(20) NOT NULL REFERENCES education_courses(id),
  project_id      VARCHAR(36) NOT NULL,
  day_number      SMALLINT NOT NULL,
  session_date    DATE NOT NULL,
  start_time      TIME NOT NULL,
  end_time        TIME NOT NULL,
  status          VARCHAR(20) NOT NULL DEFAULT 'SCHEDULED'
                  CHECK (status IN ('SCHEDULED', 'IN_PROGRESS', 'COMPLETED', 'CANCELLED')),
  curriculum_stage VARCHAR(20) NOT NULL,
  title           VARCHAR(300) NOT NULL,
  description     TEXT,
  learning_objectives TEXT[],
  instructor_id   VARCHAR(36),
  instructor_name VARCHAR(100),
  location        VARCHAR(200),
  late_threshold_minutes SMALLINT NOT NULL DEFAULT 10,  -- v1.1: late policy
  created_at      TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  updated_at      TIMESTAMPTZ NOT NULL DEFAULT NOW()
);

CREATE INDEX idx_session_course ON education_sessions(course_id);
CREATE INDEX idx_session_date ON education_sessions(session_date);

-- 출석 기록 테이블
CREATE TABLE education_attendance (
  id              BIGSERIAL PRIMARY KEY,
  session_id      VARCHAR(20) NOT NULL REFERENCES education_sessions(id),
  course_id       VARCHAR(20) NOT NULL REFERENCES education_courses(id),
  project_id      VARCHAR(36) NOT NULL,
  user_id         VARCHAR(36) NOT NULL,
  user_name       VARCHAR(100) NOT NULL,
  department      VARCHAR(100),
  position        VARCHAR(100),
  status          VARCHAR(10) NOT NULL CHECK (status IN ('present', 'absent', 'late')),
  check_in_time   TIMESTAMPTZ,
  note            TEXT,
  recorded_by     VARCHAR(36) NOT NULL,
  recorded_at     TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  UNIQUE (session_id, user_id)
);

CREATE INDEX idx_attendance_session ON education_attendance(session_id);
CREATE INDEX idx_attendance_user ON education_attendance(user_id);

-- 평가 결과 테이블
CREATE TABLE education_assessments (
  id              VARCHAR(20) PRIMARY KEY,
  course_id       VARCHAR(20) NOT NULL REFERENCES education_courses(id),
  project_id      VARCHAR(36) NOT NULL,
  user_id         VARCHAR(36) NOT NULL,
  user_name       VARCHAR(100) NOT NULL,
  type            VARCHAR(20) NOT NULL CHECK (type IN ('pre_test', 'post_test', 'capstone')),
  assessment_form_id VARCHAR(36),        -- v1.1: form version for Pre/Post delta validity
  score           SMALLINT NOT NULL CHECK (score BETWEEN 0 AND 100),
  max_score       SMALLINT NOT NULL DEFAULT 100,
  passed          BOOLEAN NOT NULL DEFAULT false,
  feedback        TEXT,
  capstone_data   JSONB,               -- 캡스톤 프로젝트 데이터 (JSON)
  assessed_at     TIMESTAMPTZ NOT NULL,
  assessed_by     VARCHAR(36) NOT NULL,
  UNIQUE (course_id, user_id, type)
);

CREATE INDEX idx_assessment_course ON education_assessments(course_id);
CREATE INDEX idx_assessment_user ON education_assessments(user_id);

-- v1.1: 개인 이수 판정 뷰 (PMO 보고서의 기준이 되는 핵심 뷰)
-- 과정 상태(COMPLETED) ≠ 개인 이수(COMPLETED) -- 이 둘을 분리해야 보고서가 정확
CREATE VIEW participant_completion AS
SELECT
  cp.course_id,
  cp.user_id,
  cp.is_required,
  cp.role_target,
  cp.enrollment_status,
  c.project_id,
  c.track,
  c.curriculum_stage,
  c.min_attendance_rate AS required_attendance,
  -- 개인 출석률 (present+late / total sessions attended, 가중 평균)
  COALESCE(att.personal_rate, 0) AS attendance_rate,
  -- 개인 평가 점수
  pre.score AS pre_test_score,
  post.score AS post_test_score,
  cap.score AS capstone_score,
  -- 이수 판정
  (COALESCE(att.personal_rate, 0) >= c.min_attendance_rate) AS meets_attendance,
  (CASE
    WHEN c.requires_post_test AND post.score IS NULL THEN false
    WHEN c.requires_capstone AND cap.score IS NULL THEN false
    WHEN c.requires_post_test THEN post.passed
    WHEN c.requires_capstone THEN cap.passed
    ELSE true
  END) AS meets_assessment,
  (COALESCE(att.personal_rate, 0) >= c.min_attendance_rate
   AND CASE
    WHEN c.requires_post_test AND post.score IS NULL THEN false
    WHEN c.requires_capstone AND cap.score IS NULL THEN false
    WHEN c.requires_post_test THEN post.passed
    WHEN c.requires_capstone THEN cap.passed
    ELSE true
  END) AS is_completed
FROM education_course_participants cp
JOIN education_courses c ON c.id = cp.course_id
LEFT JOIN (
  SELECT ea.course_id, ea.user_id,
    (COUNT(*) FILTER (WHERE ea.status IN ('present', 'late'))::numeric
     / NULLIF(COUNT(*), 0) * 100) AS personal_rate
  FROM education_attendance ea
  GROUP BY ea.course_id, ea.user_id
) att ON att.course_id = cp.course_id AND att.user_id = cp.user_id
LEFT JOIN education_assessments pre
  ON pre.course_id = cp.course_id AND pre.user_id = cp.user_id AND pre.type = 'pre_test'
LEFT JOIN education_assessments post
  ON post.course_id = cp.course_id AND post.user_id = cp.user_id AND post.type = 'post_test'
LEFT JOIN education_assessments cap
  ON cap.course_id = cp.course_id AND cap.user_id = cp.user_id AND cap.type = 'capstone'
WHERE cp.unenrolled_at IS NULL AND cp.enrollment_status != 'DROPPED';

-- v1.1: 과정 집계 뷰 (개인 이수 기반으로 재설계)
CREATE VIEW education_completion_summary AS
SELECT
  c.project_id,
  c.track,
  c.id AS course_id,
  c.name AS course_name,
  c.status,
  c.curriculum_stage,
  COUNT(DISTINCT pc.user_id) AS total_participants,
  COUNT(DISTINCT pc.user_id) FILTER (WHERE pc.is_completed) AS completed_participants,
  ROUND(AVG(pc.attendance_rate)::numeric, 1) AS avg_attendance_rate,
  ROUND(AVG(pc.post_test_score)::numeric, 1) AS avg_post_score,
  ROUND(AVG(pc.pre_test_score)::numeric, 1) AS avg_pre_score,
  ROUND(AVG(pc.post_test_score - pc.pre_test_score)::numeric, 1) AS avg_pre_post_delta
FROM education_courses c
LEFT JOIN participant_completion pc ON pc.course_id = c.id
GROUP BY c.project_id, c.track, c.id, c.name, c.status, c.curriculum_stage;

CREATE INDEX idx_participant_enrollment ON education_course_participants(course_id, enrollment_status);
CREATE INDEX idx_assessment_form ON education_assessments(assessment_form_id);
```

### 6.7 Course List API

```
GET /api/education/courses?projectId={projectId}
    &track={biz|dev}
    &status={PLANNED|SCHEDULED|IN_PROGRESS|COMPLETED}
    &curriculumStage={fundamental|analytic_ai|agentic_ai}
    &instructorId={instructorId}
    &participantId={participantId}
    &dateRange.from={fromDate}
    &dateRange.to={toDate}
    &q={searchText}
    &page={page}&size={size}
```

> **참고**: 쿼리 파라미터는 EducationFilterSpec 키와 **1:1 매핑**된다.

```typescript
/** v1.1: KPI stats block — used in both filtered and overall scopes */
interface EducationStats {
  totalCourses: number;
  byTrack: { biz: number; dev: number };
  byStatus: Record<CourseStatus, number>;
  completionRate: number;              // 0~100 — v1.1: 개인 이수 기준 (participant_completion.is_completed)
  avgAttendance: number;               // 0~100 — "(present+late)/total, 세션별 가중 평균"
  avgAssessmentScore: number;          // 0~100 — 응시자만 대상, 미응시 제외
  upcomingSessions: number;            // 향후 7일 내 예정 세션 수
  prePostDelta: number;                // Pre -> Post 평균 향상 점수 (동일 form 기반만)
  // v1.1: PMO segment counts
  incompleteRequired: number;          // 필수 교육 미이수자 수
  attendanceRisk: number;              // 출석률 < minAttendanceRate 인원 수
  performanceRisk: number;             // prePostDelta < 0 또는 Post < 60 인원 수
}

interface CourseListResponse {
  items: Course[];
  pagination: { page: number; size: number; total: number };

  // v1.1: stats를 filtered/overall로 분리
  stats: {
    filtered: EducationStats;          // 현재 필터 조건 기준 KPI
    overall: EducationStats;           // 프로젝트 전체 기준 KPI (필터 무관)
  };

  // --- 신뢰도 3-tuple ---
  asOf: string;
  completeness: number;
  warnings: string[];
}
```

### 6.8 Course Detail API

```
GET /api/education/courses/:courseId
```

```typescript
interface CourseDetailResponse {
  course: Course;
  sessions: Session[];
  participants: {
    id: string;
    name: string;
    department: string;
    position: string;
    attendanceRate: number;
    preTestScore?: number;
    postTestScore?: number;
    capstoneScore?: number;
  }[];
  assessmentSummary: {
    preTest: {
      avgScore: number;
      minScore: number;
      maxScore: number;
      completionRate: number;
      distribution: { range: string; count: number }[];
    };
    postTest: {
      avgScore: number;
      minScore: number;
      maxScore: number;
      completionRate: number;
      distribution: { range: string; count: number }[];
    } | null;
    capstone: {
      avgScore: number;
      completionRate: number;
    } | null;
    prePostDelta: number | null;       // Post 평균 - Pre 평균
  };

  asOf: string;
  completeness: number;
  warnings: string[];
}
```

### 6.9 Session APIs

```
GET  /api/education/sessions?courseId={courseId}&projectId={projectId}
GET  /api/education/sessions/:sessionId
POST /api/education/sessions                     // 세션 생성
PATCH /api/education/sessions/:sessionId         // 세션 수정/상태 변경
```

### 6.10 Attendance API

```
GET  /api/education/sessions/:sessionId/attendance
POST /api/education/sessions/:sessionId/attendance    // 출석 일괄 기록
PATCH /api/education/attendance/:attendanceId         // 개별 출석 수정
```

```typescript
/** 출석 일괄 기록 요청 */
interface AttendanceBulkRequest {
  sessionId: string;
  records: {
    userId: string;
    status: AttendanceStatus;
    checkInTime?: string;
    note?: string;
  }[];
}

/** 출석 현황 응답 */
interface AttendanceListResponse {
  sessionId: string;
  courseId: string;
  sessionDate: string;
  sessionTitle: string;
  records: Attendance[];
  summary: {
    total: number;
    present: number;
    absent: number;
    late: number;
    rate: number;
  };
}
```

### 6.11 Assessment API

```
GET  /api/education/assessments?courseId={courseId}&type={pre_test|post_test|capstone}
POST /api/education/assessments                   // 평가 결과 입력
PATCH /api/education/assessments/:assessmentId   // 평가 결과 수정
```

```typescript
/** 평가 결과 입력 요청 */
interface AssessmentCreateRequest {
  courseId: string;
  userId: string;
  type: AssessmentType;
  score: number;
  maxScore: number;
  feedback?: string;
  capstoneProject?: {
    title: string;
    description: string;
    presentationUrl?: string;
    evaluationCriteria: {
      criterion: string;
      score: number;
      maxScore: number;
    }[];
  };
}
```

### 6.12 Education Calendar API

```
GET /api/education/calendar?projectId={projectId}
    &month={YYYY-MM}
    &track={biz|dev}
```

```typescript
interface EducationCalendarResponse {
  month: string;                       // "2026-02"
  sessions: {
    id: string;
    courseId: string;
    courseName: string;
    track: EducationTrack;
    date: string;
    dayNumber: number;
    title: string;
    status: SessionStatus;
    startTime: string;
    endTime: string;
    location?: string;
    instructorName: string;
    participantCount: number;
    attendanceRate?: number;           // 완료된 세션만
  }[];
}
```

### 6.13 Education Report API

```
GET /api/education/report?projectId={projectId}
    &track={biz|dev}
    &segment={incomplete|attendance_risk|performance_risk}   // v1.1: PMO segment filter
```

```typescript
/** v1.1: PMO segment filter — Report View 상단 3개 버튼 */
export type ReportSegment =
  | "incomplete"        // 필수 교육 미이수자 (is_required=true AND is_completed=false)
  | "attendance_risk"   // 출석 위험 (attendance_rate < minAttendanceRate)
  | "performance_risk"; // 성과 위험 (prePostDelta < 0 OR postTestScore < 60)

interface EducationReportResponse {
  project: { id: string; name: string };

  // v1.1: segment filter applied
  activeSegment?: ReportSegment;

  trackSummary: {
    track: EducationTrack;
    totalParticipants: number;
    completedParticipants: number;     // v1.1: 개인 이수 기준 (participant_completion.is_completed)
    completionRate: number;
    avgAttendance: number;
    avgPreScore: number;
    avgPostScore: number;
    avgCapstoneScore: number | null;
    prePostDelta: number;
    // v1.1: PMO segment counts
    incompleteRequired: number;
    attendanceRiskCount: number;
    performanceRiskCount: number;
  }[];

  participantDetails: {
    userId: string;
    userName: string;
    department: string;
    position: string;
    track: EducationTrack;
    // v1.1: enrollment + individual completion
    isRequired: boolean;
    enrollmentStatus: EnrollmentStatus;
    isCompleted: boolean;              // 개인 이수 여부 (participant_completion 기준)
    coursesCompleted: number;
    coursesTotal: number;
    overallAttendanceRate: number;
    preTestAvg: number;
    postTestAvg: number | null;
    capstoneScore: number | null;
    sessionAttendance: {
      sessionId: string;
      date: string;
      title: string;
      status: AttendanceStatus;
    }[];
  }[];

  asOf: string;
  completeness: number;
  warnings: string[];
}
```

### 6.14 My Education API (DEV 전용)

```
GET /api/education/my?projectId={projectId}&userId={userId}
```

```typescript
interface MyEducationResponse {
  userId: string;
  track: EducationTrack;

  courses: {
    courseId: string;
    courseName: string;
    track: EducationTrack;
    stage: CurriculumStage;
    status: CourseStatus;
    progress: number;                  // 0~100
    myAttendanceRate: number;
    myPreScore?: number;
    myPostScore?: number;
  }[];

  upcomingSessions: {
    sessionId: string;
    courseId: string;
    date: string;
    dayNumber: number;
    title: string;
    startTime: string;
    endTime: string;
    location?: string;
  }[];

  myAssessments: Assessment[];

  asOf: string;
}
```

---

## 7. 컴포넌트 분해

### 7.1 폴더 구조

```
features/
  education/
    pages/
      EducationPage.tsx               <- 메인 페이지 (뷰 모드 분기)
      CourseDetailPage.tsx             <- 교육과정 상세
    layout/
      EducationViewSwitch.tsx          <- 목록/캘린더/보고서 뷰 전환기
    components/
      // KPI
      EducationKpiRow.tsx              <- 상단 KPI 카드 Row
      TrackProgressWidget.tsx          <- 트랙별 진행률 타임라인

      // 목록 뷰
      CourseTable.tsx                  <- 교육과정 테이블
      CourseFilters.tsx                <- 필터 바 (FilterSpec 기반)
      CourseStatusBadge.tsx            <- 과정 상태 배지 (PLANNED/SCHEDULED/IN_PROGRESS/COMPLETED)
      TrackBadge.tsx                   <- 트랙 배지 (Biz/Dev 색상 구분)

      // 캘린더 뷰
      EducationCalendar.tsx            <- 월간 캘린더 (세션 표시)
      CalendarSessionCard.tsx          <- 캘린더 내 세션 카드
      CalendarNavigation.tsx           <- 월 이동 네비게이션

      // 보고서 뷰
      EducationReport.tsx              <- 이수 보고서 메인
      TrackCompletionChart.tsx         <- 트랙별 이수율 차트
      ParticipantReportTable.tsx       <- 개인별 이수 현황 테이블

      // 과정 상세
      CourseBasicInfo.tsx              <- 과정 기본 정보 카드
      CurriculumTimeline.tsx           <- 커리큘럼 일정 타임라인
      SessionList.tsx                  <- 세션 목록
      SessionDetailCard.tsx            <- 세션 상세 카드

      // 출석
      AttendancePanel.tsx              <- 출석 현황 패널 (Right Panel)
      AttendanceTable.tsx              <- 출석 테이블 (O/X/지각)
      AttendanceBulkForm.tsx           <- 출석 일괄 입력 폼

      // 평가
      AssessmentPanel.tsx              <- 평가 결과 패널 (Right Panel)
      AssessmentScoreChart.tsx         <- 점수 분포 히스토그램
      PrePostComparisonChart.tsx       <- Pre/Post 비교 차트
      CapstoneResultCard.tsx           <- 캡스톤 프로젝트 결과 카드
      AssessmentInputForm.tsx          <- 평가 결과 입력 폼

      // Right Panel
      EducationRightPanel.tsx          <- panelMode에 따른 분기 렌더링
      CoursePreviewPanel.tsx           <- 과정 Quick Preview (목록 행 선택)
      SessionDetailPanel.tsx           <- 세션 상세 (캘린더 선택)
      ReportSummaryPanel.tsx           <- 이수 보고서 요약 (개인 선택)

      // v1.1: PMO segment filters
      ReportSegmentBar.tsx             <- PMO 보고서 세그먼트 필터 3종 (미이수/출석위험/성과위험)
      KpiTooltip.tsx                   <- KPI hover tooltip (계산 기준 표시)

      // v1.1: DEV participation actions
      CalendarExportButton.tsx         <- ICS 내보내기 버튼
      MaterialLinkPanel.tsx            <- 교육 자료 링크 패널
      QuestionThread.tsx               <- 강사에게 질문 스레드

      // 모달/폼
      CourseCreateModal.tsx            <- 교육과정 생성 모달
      CourseEditModal.tsx              <- 교육과정 편집 모달
      SessionCreateModal.tsx           <- 세션 생성 모달

    api/
      educationApi.ts                  <- API 호출 함수
    hooks/
      useCourses.ts                    <- 과정 목록 TanStack Query
      useCourseDetail.ts               <- 과정 상세 TanStack Query
      useSessions.ts                   <- 세션 TanStack Query
      useAttendance.ts                 <- 출석 TanStack Query + Mutation
      useAssessments.ts                <- 평가 TanStack Query + Mutation
      useEducationCalendar.ts          <- 캘린더 TanStack Query
      useEducationReport.ts            <- 보고서 TanStack Query
      useMyEducation.ts                <- DEV 내 교육 Query
      useEducationViewMode.ts          <- 뷰 모드 상태 관리
      useEducationPanelMode.ts         <- Right Panel 모드 상태 관리
    config/
      curriculumData.ts                <- Biz/Dev 커리큘럼 정적 데이터
      educationPresetLayouts.ts        <- Preset별 UI 정책
```

### 7.2 EducationPage.tsx ViewMode 분기

```typescript
function EducationPage() {
  const { viewMode } = useAccessContext();
  const { educationView, setEducationView } = useEducationViewMode();
  const { panelMode, setPanelMode } = useEducationPanelMode(viewMode);

  const rightPanelContent = useMemo(() => {
    switch (panelMode) {
      case "none":            return undefined;
      case "course_preview":  return <CoursePreviewPanel />;
      case "session_detail":  return <SessionDetailPanel />;
      case "attendance":      return <AttendancePanel />;
      case "assessment":      return <AssessmentPanel />;
      case "report":          return <ReportSummaryPanel />;
    }
  }, [panelMode]);

  return (
    <PageLayout
      header={
        <EducationPageHeader
          viewMode={viewMode}
          educationView={educationView}
          onViewChange={setEducationView}
        />
      }
      rightPanel={rightPanelContent}
      rightPanelDefault={PRESET_POLICIES[viewMode].ui.defaultRightPanel}
    >
      <EducationKpiRow viewMode={viewMode} />

      {educationView === "list" && (
        <>
          <CourseFilters
            viewMode={viewMode}
            filterSpec={educationNode.filterSpec}
          />
          <TrackProgressWidget />
          <CourseTable
            viewMode={viewMode}
            onRowSelect={(course) => {
              if (viewMode === "DEV_EXECUTION") setPanelMode("assessment");
              else setPanelMode("course_preview");
            }}
          />
        </>
      )}

      {educationView === "calendar" && (
        <EducationCalendar
          onSessionSelect={(session) => setPanelMode("session_detail")}
        />
      )}

      {educationView === "report" && (
        <EducationReport
          onParticipantSelect={(participant) => setPanelMode("report")}
        />
      )}
    </PageLayout>
  );
}
```

### 7.3 EducationRightPanel.tsx -- panelMode 분기

```typescript
interface EducationRightPanelProps {
  panelMode: EducationPanelMode;
  selectedCourse?: Course;
  selectedSession?: Session;
  selectedParticipant?: string;
}

function EducationRightPanel({
  panelMode,
  selectedCourse,
  selectedSession,
  selectedParticipant,
}: EducationRightPanelProps) {
  switch (panelMode) {
    case "none":
      return null;
    case "course_preview":
      return <CoursePreviewPanel courseId={selectedCourse?.id} />;
    case "session_detail":
      return <SessionDetailPanel sessionId={selectedSession?.id} />;
    case "attendance":
      return <AttendancePanel courseId={selectedCourse?.id} />;
    case "assessment":
      return <AssessmentPanel courseId={selectedCourse?.id} userId={selectedParticipant} />;
    case "report":
      return <ReportSummaryPanel userId={selectedParticipant} />;
  }
}
```

---

## 8. AI Navigation 연동

### 8.1 교육 관련 AI 질문 -> 화면 이동 (FilterSpec 기반)

AI는 URL 문자열이 아니라 **FilterSpec 키 기반 필터 객체**를 반환한다.
UI는 `educationNode.filterSpec`을 참조하여 FilterSpec 객체를 URL 파라미터로 변환한다.

```typescript
/** AI가 반환하는 교육 네비게이션 추천 */
interface AiEducationNavigation {
  targetNodeId: "education";
  /** FilterSpec 기반 필터 객체 -- URL이 아니라 구조화된 객체 */
  filter: EducationFilterSpec;
  /** 특정 과정 직접 이동 시 */
  entityId?: string;                   // "CRS-01"
  /** 뷰 모드 지정 */
  viewMode?: EducationViewMode;        // "calendar" | "report"
  reason: string;
}
```

| 질문 | AI 반환 filter | 설명 |
|------|---------------|------|
| "교육 현황 알려줘" | `{}` | 전체 목록 |
| "Biz 트랙 교육 진행 상황은?" | `{ track: "biz" }` | FilterSpec.track |
| "Dev 커리큘럼 보여줘" | `{ track: "dev" }` | FilterSpec.track |
| "진행 중인 교육은?" | `{ status: "IN_PROGRESS" }` | FilterSpec.status |
| "다음 교육 일정은?" | `viewMode: "calendar"` | 캘린더 뷰 |
| "교육 이수 보고서" | `viewMode: "report"` | 보고서 뷰 |
| "내 교육 일정 알려줘" | `{ participantId: "me" }` | 내 교육 필터 |
| "Fundamental 과정 보여줘" | `{ curriculumStage: "fundamental" }` | 커리큘럼 단계 필터 |
| "CRS-01 교육 상세" | `entityId: "CRS-01"` | 과정 상세 직접 이동 |
| "캡스톤 프로젝트 결과는?" | `{ curriculumStage: "agentic_ai" }` + `entityId` | Agentic AI 단계 |

### 8.2 AI Navigation 예시 (JSON)

```json
{
  "answer": {
    "summary": "현재 Biz 트랙은 Fundamental 과정 2일 중 2일 완료(100%), Analytic AI 과정은 SCHEDULED 상태입니다.",
    "highlights": [
      "Biz Fundamental: 완료 (Day 1-2)",
      "Biz Analytic AI: 다음 주 시작 예정 (2/17~2/20)",
      "평균 출석률: 93%"
    ]
  },
  "navigation": {
    "primary": {
      "targetNodeId": "education",
      "deepLinkParams": { "track": "biz" }
    },
    "secondary": {
      "targetNodeId": "education",
      "deepLinkParams": { "view": "calendar" }
    }
  },
  "viewMode": {
    "suggested": "PM_WORK",
    "reason": "교육 진행 현황 확인 -- PM 계획 관점"
  },
  "scopeHints": { "projectId": "PRJ-001" }
}
```

### 8.3 Hub 노드 페널티 적용

교육관리는 `nodeRole: "detail"` 노드이므로, 행동/필터 질문에 +10 가산이 적용된다.

```
Intent->Node 스코어링:

"내 교육 일정 알려줘"
  -> education (detail): 기본 65 + 10 (detail 보너스) = 75
  -> dashboard (hub): 기본 50 - 20 (hub 페널티) = 30
  -> 최종 추천: education

"교육 이수율 알려줘"
  -> education (detail): 기본 70 + 10 = 80
  -> dashboard (hub): 기본 55 - 20 = 35
  -> 최종 추천: education
```

---

## 9. 인터랙션 상세

### 9.1 트랙 진행 타임라인 클릭

```
트랙 진행 타임라인의 Stage 노드 클릭
  -> 해당 Stage의 과정 목록으로 필터 적용
  -> FilterSpec: { track: "biz", curriculumStage: "analytic_ai" }
  -> CourseTable 자동 필터링
```

### 9.2 KPI Card 클릭

```
이수율 Card 클릭
  -> 뷰 모드: "report" (보고서 뷰로 전환)

예정 세션 Card 클릭
  -> 뷰 모드: "calendar" (캘린더 뷰로 전환)
  -> 이번 주 표시

평균 출석률 Card 클릭
  -> Drawer 열림 (420px)
  -> 과정별 출석률 요약 테이블

평균 평가 점수 Card 클릭
  -> Drawer 열림 (420px)
  -> Pre/Post 비교 차트
```

### 9.2a KPI 해석 가능성 (v1.1)

KPI Card에 hover tooltip을 표시하여 사용자가 "이 숫자가 무엇을 세는 건지" 즉시 이해할 수 있게 한다.

| KPI 키 | tooltip 표시 | 계산 기준 |
|--------|-------------|---------|
| `total_courses` | "등록된 교육과정 수 (PLANNED 포함)" | `COUNT(education_courses)` |
| `completion_rate` | "개인 기준 이수율 = 이수 완료 인원 / 대상 인원" | `participant_completion.is_completed / total_enrolled` -- 과정 상태가 아닌 개인 이수 기준 |
| `avg_attendance` | "출석률 = (출석+지각) / 전체, 세션별 가중 평균" | `SUM(present+late) / SUM(total)` across all sessions -- 세션별 참여자 수 가중 |
| `avg_assessment_score` | "응시자 평균 점수 (미응시 제외)" | `AVG(score) WHERE score IS NOT NULL` |
| `upcoming_sessions` | "향후 7일 내 예정 세션 수" | `COUNT(sessions WHERE date BETWEEN today AND today+7 AND status='SCHEDULED')` |
| `pre_post_score_delta` | "Pre→Post 평균 향상 점수 (동일 폼 기반)" | `AVG(post.score - pre.score) WHERE pre.assessment_form_id = post.assessment_form_id` |
| `incomplete_required` | "필수 교육 미이수자 수" | `COUNT(participant_completion WHERE is_required AND NOT is_completed)` |

### 9.3 캘린더 세션 클릭

```
캘린더의 세션 블록 클릭
  -> Right Panel: panelMode = "session_detail"
  -> 세션 상세 정보 (일자, 주제, 강사, 장소)
  -> 출석 요약 (완료된 세션만)
  -> CTA: [출석 관리] [평가 결과 보기]
```

### 9.4 출석 관리

```
PM Preset에서:
  과정 상세 -> 세션 선택 -> Right Panel: "attendance"
  -> [출석 관리] CTA 클릭
  -> AttendanceBulkForm 모달 열림
  -> 참여자 목록 + 체크박스 (출석/결석/지각)
  -> 일괄 저장
  -> 출석 현황 실시간 갱신
```

### 9.5 평가 입력

```
PM Preset에서:
  과정 상세 -> [평가 입력] CTA 클릭
  -> AssessmentInputForm 모달 열림
  -> 유형 선택 (Pre-Test / Post-Test / 캡스톤)
  -> 참여자별 점수 입력
  -> 캡스톤: 프로젝트 제목/설명/평가항목 추가 입력
  -> 저장 -> 평가 현황 갱신
```

### 9.6 교육과정 생성

```
PM Preset에서:
  [+ 교육과정 등록] CTA 클릭
  -> CourseCreateModal 열림
  -> 입력: 과정명, 트랙(Biz/Dev), 커리큘럼 단계, 기간, 강사, 장소, 최대 인원
  -> 참여자 추가 (프로젝트 멤버 검색)
  -> 저장 -> status: PLANNED
  -> 세션 자동 생성 (커리큘럼 기반)
```

### 9.7 Phase-교육 매핑

```
PM Preset에서:
  과정 편집 -> [Phase 연계] 섹션
  -> 프로젝트 Phase 목록 표시
  -> 체크박스로 연관 Phase 선택
  -> 저장 -> linkedPhaseIds 갱신
  -> Phase 관리 화면에서도 연관 교육 표시 가능
```

### 9.8 데이터 새로고침

| 항목 | 주기 |
|------|------|
| 과정 목록 | 페이지 진입 시 + 필터 변경 시 |
| 캘린더 | 월 변경 시 |
| 출석 현황 | 세션 선택 시 (실시간) |
| 평가 결과 | 과정 상세 진입 시 |
| 보고서 | 뷰 전환 시 (캐시 5분) |
| KPI | 5분 자동 갱신 (TanStack Query `refetchInterval`) |
| 전체 | 수동 새로고침 버튼 (Page Header) |

---

## 10. 반응형 대응

### 10.1 브레이크포인트별 레이아웃

| 너비 | KPI Row | 트랙 진행 | Main Content | Right Panel |
|------|---------|---------|-------------|-------------|
| >=1440px | 6열 가로 배치 | 2 트랙 가로 | 70% | 30% (visible) |
| 1280px | 3x2 그리드 | 2 트랙 세로 | 100% | Drawer (toggle) |
| <=1024px | 2x3 그리드 | 1 트랙 (탭 전환) | 100% | Drawer (overlay) |
| <=768px | 1열 세로 스택 | 1 트랙 (탭 전환) | 100% | Full Modal |

### 10.2 뷰별 반응형

| 뷰 모드 | >=1440px | 1280px | <=1024px | <=768px |
|---------|---------|--------|---------|--------|
| 목록 | 전체 컬럼 테이블 | 축약 컬럼 (-2개) | 카드 뷰 전환 | 카드 뷰 (1열) |
| 캘린더 | 월간 7열 | 월간 7열 (축약) | 주간 뷰 전환 | 일간 목록 뷰 |
| 보고서 | 테이블 + 차트 | 테이블 + 차트 | 차트 -> 접이식 | 1열 세로 스택 |

### 10.3 위젯 축소 규칙

- **<=1280px**: 트랙 진행 타임라인 -> 세로 배치
- **<=1024px**: Pre/Post 비교 차트 -> 접이식
- **<=768px**: 커리큘럼 타임라인 -> 리스트 뷰

---

## 11. 깨지기 쉬운 곳 체크리스트

### 11.1 출석 데이터 정합성

| 위험 | 설명 | 대응 |
|------|------|------|
| **중복 출석 기록** | 동일 세션에 같은 사용자 출석이 2번 기록 | DB UNIQUE 제약 `(session_id, user_id)` + API 레벨 idempotency key |
| **세션 미완료 상태에서 출석** | SCHEDULED 세션에 출석 기록 시도 | 서버 검증: session.status가 IN_PROGRESS 또는 COMPLETED일 때만 허용 |
| **수강 탈퇴 후 출석** | 과정에서 탈퇴한 사용자의 기존 출석 | unenrolled_at 기준 출석 집계 시 필터 (탈퇴 전 출석은 유지) |

### 11.2 평가 점수 계산

| 위험 | 설명 | 대응 |
|------|------|------|
| **Pre/Post 쌍 불일치** | Pre만 있고 Post가 없는 상태에서 향상률 계산 | Post가 null이면 prePostDelta = null 반환, UI에 "미실시" 표시 |
| **평균 점수 0점 착시** | 평가 미실시를 0점으로 계산 | 미응시 사용자 제외하고 평균 계산 (응시자만 대상) |
| **캡스톤 없는 과정** | Fundamental 과정에 캡스톤 점수 요청 | 캡스톤은 agentic_ai 단계 과정만 해당, 다른 단계는 null |

### 11.3 캘린더 데이터 / 일정 충돌

| 위험 | 설명 | 대응 |
|------|------|------|
| **강사 충돌** | 같은 강사가 같은 시간대 다른 세션 배정 | v1.1: `SESSION_CONFLICT_VALIDATORS.instructor` — instructor_id + date + time overlap 검증 |
| **장소 충돌** | 같은 장소에 같은 시간대 다른 세션 | v1.1: `SESSION_CONFLICT_VALIDATORS.location` — location + date + time overlap 검증 |
| **참여자 충돌** | 같은 사용자가 같은 시간대 다른 세션 수강 | v1.1: `SESSION_CONFLICT_VALIDATORS.participant` — enrollment + date + time overlap WARNING |
| **track/date 단순 중복** | 같은 트랙에 같은 날 2개 세션 (오전/오후 분리 등 예외) | v1.1: 기본 비활성 옵션, 과정 설정에서 활성 가능 |
| **타임존 문제** | 서버 UTC vs 로컬 KST 불일치 | 모든 날짜는 UTC 저장, 프론트에서 KST 변환 표시 |

### 11.4 과정 상태 전이

| 위험 | 설명 | 대응 |
|------|------|------|
| **잘못된 상태 전이** | PLANNED에서 바로 COMPLETED | COURSE_STATUS_TRANSITIONS 규칙 서버 강제 |
| **미완료 세션 있는 COMPLETED** | 세션이 남아있는데 과정 완료 처리 | COMPLETED 전이 전 모든 세션 COMPLETED/CANCELLED 검증 |

### 11.5 동시 편집

| 위험 | 설명 | 대응 |
|------|------|------|
| **출석 동시 입력** | 여러 관리자가 같은 세션 출석 동시 기록 | Optimistic Locking (updatedAt 비교) + Conflict Resolution UI |

### 11.6 개인 이수 판정 (v1.1)

| 위험 | 설명 | 대응 |
|------|------|------|
| **과정 COMPLETED ≠ 개인 이수** | 과정이 COMPLETED인데 개인 미이수자 존재 | `participant_completion` 뷰로 개인 기준 판정 — PMO 보고서는 개인 기준 사용 |
| **minAttendanceRate 미달 이수** | 출석률 기준 미달인데 enrollmentStatus가 COMPLETED | 서버에서 `meets_attendance AND meets_assessment` 양쪽 충족 시만 COMPLETED 전이 허용 |
| **필수 교육 미이수 누락** | is_required=true인데 보고서에서 미이수로 안 잡힘 | `incompleteRequired` 집계가 `is_required AND NOT is_completed` 기준인지 테스트 |

### 11.7 지각 기준 / 평가 버전 (v1.1)

| 위험 | 설명 | 대응 |
|------|------|------|
| **지각 기준 불일치** | late_threshold_minutes가 세션마다 다른데 일괄 적용 착각 | 서버가 `session.late_threshold_minutes` 기준으로 자동 판정 — UI는 결과만 표시 |
| **Pre/Post 폼 불일치 비교** | Pre는 v1 폼, Post는 v2 폼인데 delta 계산 | `assessment_form_id`가 다르면 prePostDelta = null 반환, UI에 "폼 버전 불일치" 표시 |
| **평균 점수 0점 착시** | 응시자 0명일 때 avgScore=0 반환 | 응시자 0명이면 null 반환 — UI에 "미실시" 표시, 0점과 구분 |

### 11.8 서버 자동 전이 (v1.1)

| 위험 | 설명 | 대응 |
|------|------|------|
| **자동 전이 이중 실행** | 세션 2개가 거의 동시에 COMPLETED → Course 전이 2번 호출 | 서버 트리거에 idempotent guard: `IF course.status === targetStatus THEN no-op (200 OK)` |
| **Post-Test 없는 COMPLETED** | requiresPostTest=true인데 Post-Test 없이 COMPLETED 전이 | 서버 guard 조건에 `post_test_completion_rate >= 1.0` 검증 포함 |
| **Capstone 대체 정책 혼란** | agentic_ai 과정에서 capstone이 post 역할인데 post도 요구 | `DEFAULT_COMPLETION_POLICIES`에서 stage별 기본값 명시 — agentic_ai는 capstone 필수, post 불필요 |

---

## 12. Capability 매핑

### 12.1 교육관리 Capability 상세 (v1.1: 즉시 활성)

v1.1부터 Capability를 **즉시 활성** 상태로 전환하여, CTA 노출과 API 접근을 동시에 통제한다.

```typescript
/** v1.1: 교육관리 Capability — 6종 활성 */
type EducationCapability =
  | "view_education"           // 교육 조회 (화면 접근 기본)
  | "manage_education_course"  // 교육과정 생성/편집/삭제
  | "manage_education_session" // 세션 생성/편집/취소
  | "record_attendance"        // 출석 기록 (일괄/개별)
  | "submit_assessment"        // 평가 결과 입력/수정
  | "export_education_report"  // 교육 보고서 Export
  ;
```

| Capability | 설명 | 사용 위치 |
|-----------|------|---------|
| `view_education` | 화면 접근 + 모든 조회 API | 모든 Preset 기본 |
| `manage_education_course` | 과정 CRUD, Phase 연계 | PM_WORK suggestedAction: create_course |
| `manage_education_session` | 세션 CRUD, 상태 변경 | PM_WORK suggestedAction: schedule_session |
| `record_attendance` | 출석 일괄/개별 기록 | PM_WORK suggestedAction: record_attendance |
| `submit_assessment` | 평가 점수 입력/수정 | PM_WORK suggestedAction: submit_assessment |
| `export_education_report` | 보고서 Export (PDF/Excel) | PMO_CONTROL suggestedAction: export_report |

### 12.2 Preset별 행위 권한 매트릭스 (v1.1: Capability 기반)

| 행위 | 필요 Capability | PM_WORK | PMO_CONTROL | DEV_EXECUTION |
|------|----------------|---------|------------|--------------|
| 교육 목록 조회 | `view_education` | O | O | O (필터: me) |
| 교육 상세 조회 | `view_education` | O | O | O |
| 캘린더 조회 | `view_education` | O | O | O |
| 보고서 조회 | `view_education` | O | O | X |
| 교육과정 생성/편집 | `manage_education_course` | O | X | X |
| 세션 생성/편집 | `manage_education_session` | O | X | X |
| 출석 기록 | `record_attendance` | O | X | X |
| 평가 입력 | `submit_assessment` | O | X | X |
| 보고서 Export | `export_education_report` | X | O | X |
| 내 교육/평가 조회 | `view_education` | O | O | O |
| 캘린더 내보내기 (ICS) | `view_education` | O | O | O (v1.1) |
| 교육 자료 보기 | `view_education` | O | O | O (v1.1) |
| 강사에게 질문 | `view_education` | O | O | O (v1.1) |

### 12.3 Phase-교육 연계 매핑

교육은 프로젝트 단계(Phase)와 연계하여 **적시 교육**을 보장한다.

| Phase | 추천 교육 | 이유 |
|-------|---------|------|
| Step 1 (분석) | Biz Fundamental, Dev Fundamental | 프로젝트 초기 기초 역량 확보 |
| Step 2 (설계) | Biz Analytic AI, Dev Analytic AI | 설계 단계에서 데이터 분석 역량 필요 |
| Step 3 (구현) | Dev Agentic AI | 구현 단계에서 에이전트 시스템 구축 역량 필요 |
| Step 4 (테스트) | Biz Agentic AI | 테스트 단계에서 업무 담당자 에이전트 활용 역량 필요 |

---

## 13. DoD (본 화면 완료 기준)

- [ ] `/education` 목록에서 Preset별 컬럼/CTA 분기 동작
- [ ] FilterSpec 기반 다차원 필터 (track/status/curriculumStage/dateRange/instructorId/participantId/q) 동작
- [ ] KPI Row: 전체 과정 수, 이수율, 평균 출석률, 예정 세션, 평균 평가 점수, Pre/Post 향상률 표시
- [ ] 2 트랙(Biz/Dev) 진행률 타임라인 위젯 동작
- [ ] 3단계 커리큘럼(Fundamental/Analytic AI/Agentic AI) 시각화
- [ ] panelMode 기반 Right Panel 분기 (none/course_preview/session_detail/attendance/assessment/report)
- [ ] 행 클릭 -> panelMode에 따라 Right Panel 내용 변경
- [ ] 뷰 모드 전환 (목록/캘린더/보고서) 동작
- [ ] 캘린더 뷰: 월간 교육 일정 표시 + 세션 클릭 -> 상세 패널
- [ ] 보고서 뷰: 트랙별 이수 요약 + 개인별 이수 현황 테이블
- [ ] `/education/:courseId` 과정 상세: 커리큘럼 타임라인 + 세션 목록
- [ ] 출석 관리: 일괄 출석 기록 (present/absent/late) + 실시간 집계
- [ ] 평가 입력: Pre-Test / Post-Test / 캡스톤 점수 입력
- [ ] Pre/Post 점수 비교 차트 + 향상률 표시
- [ ] 캡스톤 프로젝트 결과 카드 (agentic_ai 단계 전용)
- [ ] 교육과정 상태 전이 (PLANNED -> SCHEDULED -> IN_PROGRESS -> COMPLETED) 서버 강제
- [ ] Phase-교육 연계 매핑 (linkedPhaseIds) 관리
- [ ] PM: 교육과정 생성/편집, 세션 생성, 출석 기록, 평가 입력 동작
- [ ] PMO: 이수율 통제 뷰 + 보고서 Export 동작
- [ ] DEV: 내 교육 일정 + 내 평가 결과 조회 (participantId=me 기본 적용)
- [ ] AI 추천: FilterSpec 기반 딥링크 + 가상 노드 (biz/dev/my/calendar/report)
- [ ] 반응형 레이아웃 (>=1440 / 1280 / <=1024 / <=768)
- [ ] 데이터 신뢰도 3-tuple (asOf/completeness/warnings) 표시
- [ ] EXEC_SUMMARY / CUSTOMER_APPROVAL Preset에서 메뉴 숨김 처리
- [ ] v1.1: Capability 세분화 — 6종 Capability가 Preset별 CTA/API에 정확히 매핑
- [ ] v1.1: 개인 이수(ParticipantCompletion) — enrollmentStatus/is_completed 기반 PMO 보고서 정확도 확인
- [ ] v1.1: 서버 자동 전이 — 첫 세션 시작 시 IN_PROGRESS, 전체 완료+정책 충족 시 COMPLETED 자동 전이
- [ ] v1.1: 3종 일정 충돌 검증 — 강사/장소/참여자 충돌 서버 검증 동작
- [ ] v1.1: KPI 해석 가능성 — hover tooltip에 계산 기준 표시 (avg_attendance, completion_rate 등)
- [ ] v1.1: stats 이중 스코프 — filtered/overall 분리 동작
- [ ] v1.1: DEV 참여형 액션 — ICS export, 교육 자료 링크, 질문 스레드 동작
- [ ] v1.1: PMO 세그먼트 필터 — 미이수/출석위험/성과위험 3종 필터 동작

### 13.1 서버 단위 핵심 테스트 (v1.1)

| # | 테스트 항목 | 검증 내용 |
|---|-----------|---------|
| 1 | 상태 전이 거부 | PLANNED→COMPLETED 직접 전이 시 400 반환 |
| 2 | 자동 전이: IN_PROGRESS | 첫 세션 IN_PROGRESS → course.status 자동 전이 |
| 3 | 자동 전이: COMPLETED | 모든 세션 완료 + 평가 정책 충족 → course.status 자동 COMPLETED |
| 4 | COMPLETED 거부 (평가 미충족) | requiresPostTest=true인데 Post-Test 0건 → COMPLETED 전이 거부 |
| 5 | 출석 idempotency | 동일 session_id+user_id로 POST 2번 → 1건 유지 (UNIQUE + upsert) |
| 6 | 평균 점수 null 처리 | 응시자 0명일 때 avgScore = null (0 금지) |
| 7 | Capability 권한 검증 | PMO가 record_attendance 호출 시 403, DEV가 manage_education_course 호출 시 403 |
| 8 | 세션 충돌 검증 | 강사 충돌/장소 충돌 시 400, 참여자 충돌 시 warning 반환 |
| 9 | 개인 이수 판정 | meets_attendance AND meets_assessment 모두 충족 시만 is_completed=true |
| 10 | Pre/Post 폼 불일치 | assessment_form_id 다르면 prePostDelta=null |

### 13.2 프론트 상호작용 테스트 (v1.1)

| # | 테스트 항목 | 검증 내용 |
|---|-----------|---------|
| 1 | ViewMode 전환 + 필터 유지 | 목록에서 track=biz 걸고 캘린더 전환 → 필터 유지 |
| 2 | panelMode 분기 | DEV row select → assessment, PM row select → course_preview |
| 3 | KPI tooltip | hover 시 계산 기준 텍스트 표시 |
| 4 | stats scope | 필터 적용 시 stats.filtered 변경, stats.overall 불변 |
| 5 | PMO 세그먼트 필터 | "미이수" 클릭 → participantDetails에 is_required=true AND is_completed=false만 표시 |
| 6 | DEV 액션 | ICS export 클릭 → .ics 파일 다운로드 |

### 13.3 데이터 기반 회귀 시나리오 (v1.1)

> 참여자 15명, 중도 탈퇴(DROPPED) 2명, 세션 10개 중 1개 CANCELLED,
> 지각 3명(late_threshold 10분), Post-Test 미응시 4명, 필수 교육(is_required) 10명
>
> 이 조합에서 아래 숫자가 정확한지 검증:
> - completion_rate: 개인 이수 기준 (과정 상태 기준 X)
> - avg_attendance: 가중 평균 (세션별 참여자 수 반영)
> - incompleteRequired: is_required=true AND NOT is_completed 인원 수
> - prePostDelta: 동일 assessment_form_id 기반만

---

## 부록 A. 테이블 컬럼 정의

### A.1 전체 컬럼 (PM_WORK 기준)

| # | 컬럼명 | 필드 | 너비 | 정렬 | 필터 |
|---|--------|------|------|------|------|
| 1 | 과정 ID | id | 80px | - | - |
| 2 | 과정명 | name | 200px | O | - |
| 3 | 트랙 | track | 80px | - | O |
| 4 | 커리큘럼 단계 | curriculumStage | 120px | - | O |
| 5 | 상태 | status | 100px | O | O |
| 6 | 기간 | startDate ~ endDate | 160px | O | O |
| 7 | 강사 | instructor.name | 120px | - | O |
| 8 | 수강 인원 | participantIds.length | 80px | O | - |
| 9 | 출석률 | avgAttendanceRate | 80px | O | - |
| 10 | 평가 평균 | avgAssessmentScore | 80px | O | - |
| 11 | 이수 세션 | completedSessionCount / sessionCount | 100px | O | - |

### A.2 Preset별 숨김 컬럼

| Preset | 숨김 컬럼 |
|--------|---------|
| PM_WORK | (전체 표시) |
| PMO_CONTROL | #1, #7 |
| DEV_EXECUTION | #1, #7, #8 |

---

## 부록 B. Biz 트랙 커리큘럼 상세 목표

### B.1 Fundamental (Day 1-2)

**Day 1: AI 도구 활용 입문**

| 학습 목표 | 상세 내용 |
|---------|---------|
| Assistant -> Agent -> Autonomous 개념 | AI 자동화의 3단계 이해 |
| 생성형AI(요약/정리) 기본 | ChatGPT 등 LLM 기반 요약/정리 실습 |
| 프롬프트 기본설정 | 목표/제약/예시 기반 프롬프트 설계 |
| 완성된 프롬플릿 실행 체험 | non-template형 프롬프트 체험 |
| 반복업무 자동화 아이디어 발굴 | 실무 기반 자동화 아이디어 도출 |

**Day 2: 데이터와 AI에 대한 개념**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 데이터의 역할과 가치 이해 | 비즈니스에서 데이터의 의미 |
| 정형/비정형 데이터 차이 | 구조적/비구조적 데이터 분류 |
| 데이터 활용 사례 | 실제 업무 데이터 활용 사례 학습 |
| 인공지능 기본 개념 | AI의 정의, 활용 영역 |
| 머신러닝/딥러닝 차이 | 전통적 ML vs Deep Learning 비교 |
| 생성형 AI 작동 원리 | Transformer, LLM 기초 원리 |
| 생성형 AI 성과와 한계 | 현실적 기대치 설정 |

### B.2 Analytic AI (Day 3-6)

**Day 3-4: 데이터 분석 및 시각화**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 데이터 분석 프로세스 이해 | 전체 분석 파이프라인 이해 |
| 탐색적 데이터 분석(EDA) | 데이터 탐색 방법론 |
| 기술 통계 | 기본 통계량 이해 |
| 시각화 기법 | 차트 유형 선택 기준 및 해석 |

**Day 5-6: 노코드 머신러닝 모델 활용**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 머신러닝 기본 개념 | ML 개념, 회귀/분류 모델 |
| 노코드 도구 개념 | GUI 기반 ML 도구 활용 |
| 예측 결과 해석 | 모델 출력 해석 방법 |
| 모델 성능 평가 | 정확도, 정밀도, 재현율 등 지표 |

### B.3 Agentic AI (Day 7-10)

**Day 7-8: Agentic Process 설계 및 구현**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 디지털 동료(Agent) 만들기 | 업무 프로세스 설계 사고 |
| n8n 워크플로우 제작 | 노드/조건/분기 |
| Process-GPT Lv1-Lv5 | 프로세스 자동화 단계별 실습 |
| 도구 연결 | 메일/시트/문서/웹 연결 |
| 테스트/디버깅 루틴 | 자동화 프로세스 검증 |

**Day 9: 자율 에이전트 및 응용**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 바이브 코딩 체험 | Cursor 설치 및 간단한 웹앱 생성 |
| 자연어(라이브코딩)로 ERP 구현 | 간단한 ERP시스템 구현 |
| Proactive/자율화 설계 | 조건/이벤트 트리거, 자동 실행 기능 |
| Cursor 기초 | 코드 없이 수정/생성 |
| Agentic 디자인 패턴 | 라우팅/병렬/검토 |
| 개인 업무 자율화 프로젝트 | 실습 프로젝트 수행 |

**Day 10: 캡스톤 프로젝트**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 전 과정 종합 실습 | 10일간 학습 내용 종합 적용 |
| 실제 업무 개선 프로젝트 | 실무 문제 해결 프로젝트 수행 및 발표 |

---

## 부록 C. Dev 트랙 커리큘럼 상세 목표

### C.1 Fundamental (Day 1-3)

**Day 1: AI 코딩 및 LLM 활용 기초**

| 학습 목표 | 상세 내용 |
|---------|---------|
| AI IDE 코딩 루틴 | Copilot/Cursor 기반 코딩 워크플로우 |
| 프롬프트/출력 제어 | 구조화/검증 기법 |
| LLM App 기본 | 요약/분류 앱 구현 |
| Tool 호출 기본 | Function Calling/ReAct 패턴 |
| Git/빌드/테스트 자동화 | CI/CD 기초 |

**Day 2-3: 파이썬 기본 문법 익히기**

| 학습 목표 | 상세 내용 |
|---------|---------|
| Google Colab 환경 | 클라우드 기반 개발 환경 이해 |
| 파이썬 기본 문법 | 변수, 데이터 타입, 연산자 |
| 기본 자료형 | 리스트, 튜플, 딕셔너리 |
| 조건문/반복문 | if/for/while 사용법 |
| 함수 정의 | def, 매개변수, 반환값 |

### C.2 Analytic AI (Day 4-6)

**Day 4: 파이썬 기반 데이터 분석 및 시각화**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 데이터 로딩 | pandas 데이터 로딩 |
| 기본 전처리 | 결측치, 이상치 처리 |
| 탐색적 데이터 분석(EDA) | 분포 분석, 상관 분석 |
| 기본 시각화 | matplotlib/seaborn 차트 |

**Day 5-6: 머신러닝 모델 구축과 성능 평가**

| 학습 목표 | 상세 내용 |
|---------|---------|
| ML 기본 개념 | 지도/비지도 학습 |
| 분류/회귀 모델 | scikit-learn 기반 구현 |
| 알고리즘 원리 | Decision Tree, Random Forest, SVM 등 |
| 성능 평가 | Accuracy, Precision, Recall, F1, AUC |
| 하이퍼파라미터 튜닝 | Grid Search, 교차 검증 |

### C.3 Agentic AI (Day 7-10)

**Day 7: 지식 통합 및 에이전트 디자인**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 에이전트 설계 | LangChain/LangGraph 기반 Agent 구조 |
| RAG 구현 | 벡터DB + Text2SQL 질의/적용 |
| Tool Use 패턴 | 에러핸들링/리트라이/워터드레일 |
| Memory 기초 | 세션/장기/기억, memO 개념 |
| 멀티에이전트 입문 | CrewAI 역할 분배 |

**Day 8-9: Advanced 멀티에이전트 시스템**

| 학습 목표 | 상세 내용 |
|---------|---------|
| MCP 기반 Tool 표준화 | FastMCP 연동 |
| A2A/Agent Mesh | 개념/상호운용 연습 |
| 이벤트 기반 오케스트레이션 | 상태/이벤트/패킷/프레임 |
| 성능/비용 최적화 | 토큰/캐시/병렬/졸업 |
| 운영/관측 | 로그/트레이싱/평가 루프 |
| 컨텍스트(멀티에이전트) | 자동화 솔루션 |

**Day 10: 캡스톤 프로젝트**

| 학습 목표 | 상세 내용 |
|---------|---------|
| 전 과정 종합 실습 | 멀티에이전트 시스템 구축 |
| 실제 프로젝트 기반 | 보험심사 도메인 적용 프로젝트 수행 및 발표 |

---

## 부록 D. 변경이력

| 버전 | 날짜 | 변경 내용 |
|------|------|---------|
| v1.0 | 2026-02-08 | 초안 작성: (1) 2트랙(Biz/Dev) 커리큘럼 3단계 구조, (2) Course->Session->Attendance->Assessment 4계층 엔티티, (3) 3뷰 모드(목록/캘린더/보고서), (4) FilterSpec 온톨로지 내장, (5) Pre/Post 평가 비교, (6) Phase-교육 연계 매핑, (7) Preset 3종(PM_WORK/PMO_CONTROL/DEV_EXECUTION), (8) AI Navigation FilterSpec 기반 딥링크 |
| v1.1 | 2026-02-08 | 크로스리뷰 반영 (제품 수준 보강): |

**v1.0 → v1.1 상세 변경 내역:**

| # | 영역 | 변경 내용 | 관련 섹션 |
|---|------|---------|---------|
| 1 | Capability | `view_education` 단일 → 6종 Capability 즉시 활성 (manage_education_course, manage_education_session, record_attendance, submit_assessment, export_education_report) | §1.1, §2.2, §12.1, §12.2 |
| 2 | 개인 이수 | ParticipantCompletion 모델 도입 — 과정 상태 ≠ 개인 이수 분리, enrollment_status(ENROLLED/WAITLIST/DROPPED/COMPLETED) 추가 | §1.1, §6.5a, §6.6 |
| 3 | 서버 전이 | Course 상태를 서버 중심 자동 전이로 전환 — 첫 세션 시작→IN_PROGRESS, 전체 완료+정책 충족→COMPLETED | §1.1, §6.5 |
| 4 | Completion Policy | requiresPostTest, requiresCapstone, minAttendanceRate를 과정 설정으로 선택 가능 (agentic_ai: capstone 대체) | §6.1, §6.5, §6.6 |
| 5 | 일정 충돌 | track/date 단순 금지 → 3종 분해 (강사/장소/참여자 기준 충돌 검증), track/date는 옵션으로 전환 | §6.5b, §11.3 |
| 6 | 지각 정책 | session.late_threshold_minutes 도입 — 서버가 check-in 시간 기반 present/late 자동 판정 | §6.2, §6.6 |
| 7 | 평가 버전 | assessment_form_id 추가 — Pre/Post delta는 동일 폼 기반만 유효, 불일치 시 null | §6.4, §6.6 |
| 8 | stats 분리 | CourseListResponse.stats를 filtered(현재 필터) + overall(프로젝트 전체)로 이중 스코프 분리 | §6.7 |
| 9 | PMO 세그먼트 | Report API에 segment 파라미터 추가 — incomplete/attendance_risk/performance_risk 3종 필터 | §6.13 |
| 10 | KPI 해석 | KPI hover tooltip에 계산 기준 표기 (가중 평균, 개인 이수 기준, 응시자만 대상 등) | §9.2a |
| 11 | DEV 액션 | DEV preset에 캘린더 내보내기(ICS), 교육 자료 보기, 강사 질문 3종 참여형 액션 추가 | §2.2, §4.3 |
| 12 | DB 참여자 | education_course_participants: is_required, role_target, enrollment_status, completed_at 컬럼 추가 | §6.6 |
| 13 | DB 과정 | education_courses: requires_post_test, requires_capstone, min_attendance_rate 컬럼 추가 | §6.6 |
| 14 | DB 세션 | education_sessions: late_threshold_minutes 컬럼 추가 | §6.6 |
| 15 | DB 평가 | education_assessments: assessment_form_id 컬럼 추가 | §6.6 |
| 16 | DB 뷰 | participant_completion 뷰 신규 — 개인 이수 판정 (meets_attendance, meets_assessment, is_completed) | §6.6 |
| 17 | DB 뷰 | education_completion_summary 뷰 재설계 — 개인 이수 기반 집계, pre/post delta 포함 | §6.6 |
| 18 | Fragile | 3개 섹션 추가: §11.6 개인 이수 판정, §11.7 지각 기준/평가 버전, §11.8 서버 자동 전이 | §11.6-11.8 |
| 19 | DoD | 9개 항목 추가 + 테스트 전략 3개 서브섹션 (서버 핵심, 프론트 상호작용, 데이터 회귀) | §13, §13.1-13.3 |
| 20 | 컴포넌트 | 6개 신규: ReportSegmentBar, KpiTooltip, CalendarExportButton, MaterialLinkPanel, QuestionThread | §7.1 |
| 21 | 설계 원칙 | 9개 v1.1 원칙 추가 (Capability 세분화, 개인 이수 분리, 서버 전이, 충돌 검증, 지각 정책, 평가 버전, KPI 해석, stats 분리, DEV 참여형) | §1.2 |
| 22 | 질문 매핑 | "교육 자료 어디서?", "미이수자 누구?", "출석 위험 인원은?" 3개 추가 | §1.3 |
